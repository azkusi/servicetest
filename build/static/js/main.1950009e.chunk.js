(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{121:function(e,t,n){},157:function(e,t,n){},218:function(e,t,n){"use strict";n.r(t);var a,r=n(1),c=n.n(r),s=n(37),i=n.n(s),o=(n(157),n(12)),l=(n(121),n(27)),d=n(7),u=n(0),j=n.n(u),b=n(228),h=n(235),p=n(234),g=n(143),O=n(229),v=n(147),x=n(105),m=n(136),f=n(137),_=n(138),y=n(20),S=(n(42),n(65),n(163),{apiKey:"AIzaSyBA8Oj4PDbc826IzdhGDDU579yJ2pL3N9o",authDomain:"serviiotest.firebaseapp.com",projectId:"serviiotest",storageBucket:"serviiotest.appspot.com",messagingSenderId:"199172448030",appId:"1:199172448030:web:c83109d3e1e9101e3ff30f",measurementId:"G-QL4CWBDQQJ"}),w=S;y.a.apps.length?a=y.a.app().firestore():(y.a.initializeApp(S),a=y.a.firestore());var F=function(e){var t=Object(r.useState)([]),n=Object(o.a)(t,2),c=n[0],s=n[1];return Object(r.useEffect)((function(){var t=a.collection("serviceProviders").doc(e).collection("events").onSnapshot(function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],t.forEach((function(e){"none"===e.data().recurrence_type?n.push({id:e.id,title:"UNAVAILABLE",start:e.data().event_start,end:e.data().event_end,startStr:e.data().event_start_datetimeISO,endStr:e.data().event_end_datetimeISO,notes:e.data().event_notes,recurrence_type:"none"}):null===e.data().endTime?n.push({id:e.id,title:"UNAVAILABLE",notes:e.data().event_notes,daysOfWeek:e.data().daysOfWeek,startTime:e.data().startTime,endTime:e.data().endTime,startRecur:e.data().startRecur,recurrence_type:"simple_recurrence"}):n.push({id:e.id,title:"UNAVAILABLE",notes:e.data().event_notes,daysOfWeek:e.data().daysOfWeek,startRecur:e.data().startRecur,endRecur:e.data().endRecur,startTime:e.data().startTime,endTime:e.data().endTime,recurrence_type:"simple_recurrence"})})),s(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){return t()}}),[]),console.log("events: "+JSON.stringify(c)),c},k=n(140),T=n.n(k);function E(){var e=Object(r.useState)({width:window.innerWidth,height:window.innerHeight}),t=Object(o.a)(e,2),n=t[0],a=t[1];function c(){a({width:window.innerWidth,height:window.innerHeight})}return Object(r.useEffect)((function(){return window.addEventListener("resize",c),c(),function(){window.removeEventListener("resize",c)}}),[]),n}var D,R=n(30),P=n(4);y.a.apps.length?D=y.a.app().firestore():(y.a.initializeApp(w),D=y.a.firestore());var L=function(e){var t=e.serviceContent,n=Object(r.useState)(null),a=Object(o.a)(n,2),c=a[0],s=a[1],i=Object(r.useRef)(),u=Object(r.useRef)(),S=Object(r.useRef)(),w=Object(r.useRef)(),k=Object(r.useRef)(),L=F(t.site_name),N=Object(r.useState)(null),C=Object(o.a)(N,2),I=(C[0],C[1]),A=Object(r.useState)(null),B=Object(o.a)(A,2),U=B[0],q=B[1],W=t.service_content.services,V=Object(r.useState)("timeGridWeek"),G=Object(o.a)(V,2),z=G[0],H=(G[1],Object(r.useState)(new Date)),M=Object(o.a)(H,2),J=M[0],K=(M[1],Object(r.useState)(new Date)),X=Object(o.a)(K,2),Y=X[0],Q=X[1],Z=Object(r.useState)(new Date),$=Object(o.a)(Z,2),ee=$[0],te=$[1],ne=Object(r.useState)(null),ae=Object(o.a)(ne,2),re=ae[0],ce=ae[1],se=Object(r.useState)(""),ie=Object(o.a)(se,2),oe=ie[0],le=ie[1],de=Object(R.h)(),ue=(de.pathname,de.hash,de.key,Object(R.g)(),new Date),je=E(),be=je.width,he=je.height,pe=Object(r.useState)(.8),ge=Object(o.a)(pe,2),Oe=ge[0],ve=ge[1],xe=Object(r.useRef)();function me(){return me=Object(d.a)(j.a.mark((function e(n){var a,r,c,o,b,h,p,g,O,v,x,m,f;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a=i.current.value,r=S.current.value,c=u.current.value,o=w.current.value,b=k.current.value,console.log("Name: "+a),console.log("Email: "+r),console.log("Message: "+c),e.prev=9,console.log("service_requested is: "+oe),console.log("offered services are: "+JSON.stringify(U)),null!==re){e.next=17;break}return alert("Please select a date"),e.abrupt("return",null);case 17:if(null!==oe&&""!==oe){e.next=20;break}return alert("Please select a service"),e.abrupt("return",null);case 20:console.log("serviceRequested object: "+JSON.stringify(U)),h=Date.now(),p=D.collection("serviceProviders").doc(t.site_name).collection("bookingrequests").doc(),g=p.id,O=new Date(ee.toISOString()),v=parseFloat(U.duration),x=36e5*v,m=new Date(O.getTime()+x),console.log("service length is: "+v),p.set({last_message_sent:c,last_message_sent_by:"client",client_name:a,client_email:r,service_requested:o,service_notes:b,timestamp:h,booking_status:"pending",provider_read_status:"unread",startTime:ee.toISOString(),endTime:m.toISOString()}).then((function(){D.collection("serviceProviders").doc(t.site_name).collection("bookingrequests").doc(g).collection("messages").add({message:c,client_name:a,client_email:r,message_sent_by:"client",timestamp:h,provider_read_status:"unread"}).then((function(){return u.current.value="",s(!0),null}))})),(f=D.collection("serviceProviders").doc(t.site_name)).get().then(function(){var e=Object(d.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data().booking_requests_notifications,a.push(g),e.next=4,f.update({booking_requests_notifications:(n=y.a.firestore.FieldValue).arrayUnion.apply(n,Object(l.a)(a))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(9),console.log("error is: "+e.t0),s(!1);case 38:case"end":return e.stop()}}),e,null,[[9,34]])}))),me.apply(this,arguments)}return Object(r.useEffect)((function(){console.log("services: "+JSON.stringify(t.service_content.services));var e=0;if(W)for(console.log("running if in useEffect"),e=0;e<W.length;e++)W[e].service_name===oe&&q(W[e]);ve(be<700?be<500?.96:.8:.6)}),[oe,be]),null===c?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("div",{children:Object(P.jsx)("h1",{style:{textAlign:"center"},children:"Send a Booking Request"})}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsx)(b.a,{className:"justify-content-center",style:{width:"".concat(Oe*be,"px"),height:"0.5*".concat(he,"px")},children:Object(P.jsx)(v.a,{plugins:[x.b,m.a,f.a,_.a],initialView:z,events:L,initialDate:J,ref:xe,customButtons:{changeToMonthView:{text:"Month",click:function(){xe.current.getApi().changeView("dayGridMonth",Y.date)}},changeToWeekView:{text:"Week",click:function(){xe.current.getApi().changeView("timeGridWeek",Y.date)}},changeToTodayView:{text:"Today",click:function(){xe.current.getApi().changeView("timeGridDay",ue)}}},dateClick:function(e){(console.log("Full Calendar API date is: "+e.date+" type is: "+typeof e.date),console.log("date.dateStr is: "+e.dateStr+" type is: "+typeof e.dateStr),console.log("date.date is: "+e.date.toDateString()),Q(e.date),"timeGridDay"===xe.current.getApi().view.type)?document.getElementById("sendBookingRequest").scrollIntoView({behavior:"smooth"}):xe.current.getApi().changeView("timeGridDay",e.date)},headerToolbar:{center:"title",left:"changeToTodayView,changeToWeekView,changeToMonthView prev,next",right:""},views:{timeGridDay:{titleFormat:{month:"short",year:"numeric",day:"numeric",weekday:"short"}}}})}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsx)(b.a,{className:"justify-content-center",style:{maxWidth:"".concat(Oe*be,"px")},children:Object(P.jsxs)(h.a,{children:[Object(P.jsx)(h.a.Title,{children:"Send Booking Request"}),Object(P.jsx)(h.a.Body,{children:Object(P.jsxs)(p.a,{id:"sendBookingRequest",onSubmit:function(e){return me.apply(this,arguments)},children:[Object(P.jsxs)(p.a.Group,{id:"name",children:[Object(P.jsx)(p.a.Label,{children:"Name"}),Object(P.jsx)(p.a.Control,{type:"text",ref:i,placeholder:"Name",required:!0})]}),Object(P.jsxs)(p.a.Group,{id:"email",children:[Object(P.jsx)(p.a.Label,{children:"Email"}),Object(P.jsx)(p.a.Control,{type:"email",ref:S,placeholder:"Email",required:!0})]}),Object(P.jsx)(p.a.Label,{children:"Select Service"}),Object(P.jsxs)(p.a.Control,{"aria-label":"Select Service",as:"select",value:oe,onChange:function(e){console.log("e.target.value",e.target.value),I(e),le(e.target.value)},children:[Object(P.jsx)("option",{ref:w,value:""}),W.map((function(e,t){return Object(P.jsx)("option",{ref:w,value:e.service_name,children:e.service_name})}))]}),Object(P.jsxs)(p.a.Group,{id:"notes",children:[Object(P.jsx)(p.a.Label,{children:"Extra Notes"}),Object(P.jsx)(p.a.Control,{type:"text",ref:k,placeholder:"Type message"})]}),Object(P.jsx)("br",{}),Object(P.jsx)(T.a,{onChange:function(e){te(e),ce(!0)},value:ee,disableClock:!0}),Object(P.jsx)("br",{}),Object(P.jsxs)(p.a.Group,{id:"message",children:[Object(P.jsx)(p.a.Label,{children:"Message"}),Object(P.jsx)(p.a.Control,{type:"text",ref:u,placeholder:"Type message"})]}),Object(P.jsx)("br",{}),Object(P.jsx)(g.a,{type:"submit",children:"Submit Booking Request"})]})})]})})]}):Object(P.jsx)("div",{children:c?Object(P.jsxs)(O.a,{variant:"success",children:["Your message was successfully sent to ",t.service_content.page_title,Object(P.jsx)("br",{}),"We will send you an email when ",t.service_content.page_title," responds to your message."]}):Object(P.jsxs)(O.a,{variant:"danger",children:["Error occurred, please contact support at support@servviio.com",Object(P.jsx)("br",{})]})})};n(100).io,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT;var N,C=function(){return Object(P.jsxs)("div",{className:"Lost",children:[Object(P.jsx)("h1",{children:" The page you are looking for doesn't exist "}),Object(P.jsx)("br",{}),Object(P.jsx)("h2",{children:" Use navigation bar above to navigate to existing pages "})]})};y.a.apps.length?(y.a.app().firestore(),N=y.a.app().firestore(),y.a.firestore.FieldValue.serverTimestamp):(y.a.firestore(),y.a.initializeApp(S),N=y.a.firestore(),y.a.firestore.FieldValue.serverTimestamp);var I,A=function(e){var t=Object(r.useState)([]),n=Object(o.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){var t=N.collection("serviceProviders").doc(e).onSnapshot((function(e){var t;t=e.data().gallery_images,c(t)}));return function(){return t()}}),[e]),{docs:a}},B=n(230),U=function(e){var t=e.provider_Name,n=e.setSelectedImg,a=A(t).docs;return Object(P.jsxs)("div",{className:"img-grid",children:[!a&&Object(P.jsx)(B.a,{animation:"border"}),a&&a.map((function(e,t){return Object(P.jsx)("div",{className:"img-wrap",layout:!0,whileHover:{opacity:1},s:!0,onClick:function(){return n(e.url)},children:Object(P.jsx)("img",{src:e.url,alt:"uploaded pic",initial:{opacity:0},animate:{opacity:1},transition:{delay:1}})},t)}))]})},q=n(232),W=function(e){var t=e.setSelectedImg,n=e.selectedImg;return Object(P.jsx)(q.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&t(null)},initial:{opacity:0},animate:{opacity:1},children:Object(P.jsx)(q.a.img,{src:n,alt:"enlarged pic",initial:{y:"-100vh"},animate:{y:0}})})};function V(e){var t=e.serviceContent,n=Object(r.useState)(null),a=Object(o.a)(n,2),c=a[0],s=a[1],i=t.site_name;return null===i?Object(P.jsx)(B.a,{animation:"border"}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("h1",{children:" Gallery "}),0===t.service_content.gallery_images.length?Object(P.jsx)("h2",{children:"No Images Added Yet"}):Object(P.jsxs)("div",{className:"Gallery",children:[i&&Object(P.jsx)(U,{provider_Name:i,setSelectedImg:s}),c&&Object(P.jsx)(W,{selectedImg:c,setSelectedImg:s})]})]})}y.a.apps.length?y.a.app().firestore():(y.a.initializeApp(S),y.a.firestore()),y.a.apps.length?I=y.a.app().firestore():(I=y.a.firestore(),y.a.initializeApp(S));var G=function(e){console.log("admin_data in useServicList: "+e);var t=Object(r.useState)(null),n=Object(o.a)(t,2),a=n[0],c=n[1];return console.log("serviceList render ran again..."),Object(r.useEffect)((function(){var t=I.collection("serviceProviders").doc(e).onSnapshot((function(e){var t,n;return new Promise((function(a,r){t=e.data().services,n=e.data().service_categories,console.log("useEffect serviceList ran again..."),a({services:t,serviceCategories:n})})).then(function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a,r,c,s=[],i=t.services,o=t.serviceCategories;if(i&&o)if(0===o.length)e("NO_SERVICES");else for(console.log("services and categories set"),a=0;a<o.length;a++){var l={};for(c=[],r=0;r<i.length;r++)console.log("service category: "+o[a]+" service name: "+JSON.stringify(i[r])),i[r].main_category===o[a].toString()&&c.push(i[r]),r===i.length-1&&(l[o[a]]=c,s.push(l));a===o.length-1&&(console.log("Services inside loop: "+JSON.stringify(l)),console.log("ServiceReady has been set to true"),e(s))}console.log("numbers is about to change/cause rerender...")})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){c(e)}))}));return function(){return t()}}),[]),a},z=n(236);y.a.apps.length?y.a.app().firestore():(y.a.initializeApp(S),y.a.firestore());var H=function(e){var t=e.serviceContent;console.log("Calendar rerendered"),console.log("admin_data in Calendar: "+t.site_name);var n=G(t.site_name);return 0!==t.service_content.service_categories.length?null===n?Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(B.a,{animation:"border"})}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("h1",{children:"Services"}),Object(P.jsx)("div",{children:n.map((function(e,t){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(h.a,{children:[Object(P.jsxs)(h.a.Header,{children:[Object.keys(e)[0],Object(P.jsx)("br",{})]}),Object(P.jsx)(z.a,{variant:"flush",children:Object.values(e)[0].map((function(e,t){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(h.a,{children:Object(P.jsxs)(z.a.Item,{children:[Object(P.jsxs)(h.a.Title,{children:[e.service_name,Object(P.jsx)("br",{})]}),Object(P.jsx)("br",{}),Object(P.jsxs)(h.a.Subtitle,{children:["Price: \xa3",e.price]}),Object(P.jsx)("br",{}),Object(P.jsxs)(h.a.Subtitle,{children:["Duration: ",e.duration," hour(s)"]}),Object(P.jsx)("br",{}),Object(P.jsx)(h.a.Text,{children:e.description})]})}),Object(P.jsx)("br",{})]})}))})]}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{})]})}))})]}):Object(P.jsx)("h2",{children:"No Services Added Yet"})},M=n(33),J=n(62),K=n(233),X=n(237),Y=n(231),Q=n(71);var Z=function(e){var t=e.serviceContent,n=Object(r.useState)(375),a=Object(o.a)(n,2),c=a[0],s=a[1],i=E(),l=i.width,d=i.height,u=t.service_content.page_theme.theme_name;return Object(r.useEffect)((function(){s(l)}),[l,d]),c<1024?Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)(K.a,{className:"topnav",style:{"background-color":J.a[u].colors.background,height:"15vh"},children:[Object(P.jsx)(M.b,{style:{textDecoration:"none",color:J.a[u].colors.text,"font-weight":"bold"},to:"/",children:Object(P.jsx)("div",{children:Object(P.jsx)("h1",{children:t.service_content.page_title})})}),Object(P.jsx)(K.a.Toggle,{"aria-controls":"navbar-dark-example"}),Object(P.jsx)(K.a.Collapse,{style:{"z-index":"20"},id:"navbar-dark-example",children:Object(P.jsx)(X.a,{className:"topnav-right",children:Object(P.jsxs)(Y.a,{id:"nav-dropdown-dark-example",title:Object(P.jsx)("span",{style:{color:J.a[u].colors.text},children:"Menu"}),align:"end",children:[Object(P.jsx)(Y.a.Item,{style:{color:"black"},href:"/services",children:"Services"}),Object(P.jsx)(Q.a.Divider,{}),Object(P.jsx)(Y.a.Item,{style:{color:"black"},href:"/send-me-a-booking-request",children:"Send Booking Request"}),Object(P.jsx)(Q.a.Divider,{}),Object(P.jsx)(Y.a.Item,{style:{color:"black"},href:"/send-me-a-message",children:"Send Message"}),Object(P.jsx)(Q.a.Divider,{}),Object(P.jsx)(Y.a.Item,{style:{color:"black"},href:"/gallery",children:"Gallery"})]})})})]})}):Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)("div",{className:"topnav",style:{"background-color":J.a[u].colors.background,height:"15vh"},children:[Object(P.jsx)(M.b,{style:{textDecoration:"none",color:J.a[u].colors.text,"font-weight":"bold"},to:"/",children:Object(P.jsx)("div",{children:Object(P.jsx)("h1",{children:t.service_content.page_title})})}),Object(P.jsxs)("div",{className:"topnav-right",children:[Object(P.jsx)(M.b,{style:{textDecoration:"none",color:J.a[u].colors.text,"font-weight":"bold"},to:"/services",children:"Service Info & Pricing"}),Object(P.jsx)(M.b,{style:{textDecoration:"none",color:J.a[u].colors.text,"font-weight":"bold"},to:"/send-me-a-booking-request",children:"Availability & Booking"}),Object(P.jsx)(M.b,{style:{textDecoration:"none",color:J.a[u].colors.text,"font-weight":"bold"},to:"/send-me-a-message",children:"Send Message"}),Object(P.jsx)(M.b,{style:{textDecoration:"none",color:J.a[u].colors.text,"font-weight":"bold"},to:"/gallery",children:"Gallery"})]})]})})};var $,ee=function(e){var t=e.serviceContent,n=t.service_content.page_background_image.url,a=t.service_content.title_tagline_colour.hex_code;return console.log("background image URL:"+n),Object(P.jsxs)("div",{style:{textAlign:"center"},children:[Object(P.jsx)("div",{style:{"background-image":"url(".concat(n,")"),"background-repeat":"no-repeat","background-attachment":"fixed","background-size":"100% 100%","min-height":"85%","max-height":"85%",opacity:"0.4","min-width":"1024px",width:"100%",height:"auto",position:"fixed",bottom:"0",left:"0"}}),Object(P.jsx)("h1",{style:{"font-weight":"bold",color:a,position:"absolute",top:"50%",left:"20%","z-index":"10"},children:t.service_content.page_title}),Object(P.jsx)("br",{}),Object(P.jsxs)("h4",{style:{"font-weight":"bold",color:a,position:"absolute",top:"58%",left:"20%","z-index":"10"},children:[" ",t.service_content.tagline]})]})};n(100).io,n(127),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT;y.a.apps.length?$=y.a.app().firestore():(y.a.initializeApp(w),$=y.a.firestore());var te,ne=function(e){var t=e.serviceContent,n=Object(r.useState)(""),a=Object(o.a)(n,2),c=(a[0],a[1],Object(r.useState)("")),s=Object(o.a)(c,2),i=(s[0],s[1],Object(r.useState)("")),u=Object(o.a)(i,2),b=(u[0],u[1],Object(r.useState)(null)),v=Object(o.a)(b,2),x=v[0],m=v[1],f=Object(r.useRef)(),_=Object(r.useRef)(),S=Object(r.useRef)();function w(){return w=Object(d.a)(j.a.mark((function e(n){var a,r,c,s,i,o,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=f.current.value,r=S.current.value,c=_.current.value,e.prev=4,s=Date.now(),i=$.collection("serviceProviders").doc(t.site_name).collection("conversations").doc(),o=i.id,e.next=10,i.set({last_message_sent:c,last_message_sent_by:"client",client_name:a,client_email:r,timestamp:s,provider_read_status:"unread"});case 10:return e.next=12,$.collection("serviceProviders").doc(t.site_name).collection("conversations").doc(o).collection("messages").add({message:c,client_name:a,client_email:r,message_sent_by:"client",timestamp:s,provider_read_status:"unread"});case 12:(u=$.collection("serviceProviders").doc(t.site_name)).get().then(function(){var e=Object(d.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data().msgs_notifications,a.push(o),e.next=4,u.update({msgs_notifications:(n=y.a.firestore.FieldValue).arrayUnion.apply(n,Object(l.a)(a))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m(!0),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),console.log("error is: "+e.t0),m(!1);case 21:case"end":return e.stop()}}),e,null,[[4,17]])}))),w.apply(this,arguments)}return null===x?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("div",{children:Object(P.jsx)("h1",{children:"Send a Message"})}),Object(P.jsx)("div",{children:!x&&Object(P.jsx)(h.a,{children:Object(P.jsx)(h.a.Body,{children:Object(P.jsxs)(p.a,{onSubmit:function(e){return w.apply(this,arguments)},children:[Object(P.jsxs)(p.a.Group,{id:"name",children:[Object(P.jsx)(p.a.Label,{children:"Name"}),Object(P.jsx)(p.a.Control,{type:"text",ref:f,placeholder:"name",required:!0})]}),Object(P.jsxs)(p.a.Group,{id:"email",children:[Object(P.jsx)(p.a.Label,{children:"Email"}),Object(P.jsx)(p.a.Control,{type:"email",ref:S,placeholder:"email",required:!0})]}),Object(P.jsxs)(p.a.Group,{id:"message",children:[Object(P.jsx)(p.a.Label,{children:"Message"}),Object(P.jsx)(p.a.Control,{type:"text",ref:_,placeholder:"Type message",required:!0})]}),Object(P.jsx)(g.a,{type:"submit",children:"Send Message"})]})})})})]}):Object(P.jsx)("div",{children:x?Object(P.jsxs)(O.a,{variant:"success",children:["Your message was successfully sent to ",t.service_content.page_title,Object(P.jsx)("br",{}),"We will send you an email when ",t.service_content.page_title," responds to your message."]}):Object(P.jsxs)(O.a,{variant:"danger",children:["Error occurred, please contact support at support@servviio.com",Object(P.jsx)("br",{})]})})};y.a.apps.length?te=y.a.app().firestore():(te=y.a.firestore(),y.a.initializeApp(S));var ae=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(R.h)().search;return Object(r.useEffect)((function(){var e=new URLSearchParams(c);if(e.has("chat")&&e.has("provider")){var t=new URLSearchParams(c).get("provider"),n=new URLSearchParams(c).get("chat"),r=te.collection("serviceProviders").doc(t).collection("conversations").doc(n).collection("messages").orderBy("timestamp","asc").onSnapshot(function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],console.log("convo hook rerunning"),t.forEach((function(e){var t=e.id;e.data().message_sent_by,n.push({message:e.data().message,timestamp:e.data().timestamp,message_sent_by:e.data().message_sent_by,messageID:t})})),a(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(){a("DN_EXIST")}));return function(){return r()}}a("DN_EXIST")}),[]),console.log("messages: "+JSON.stringify(n)),n};var re,ce=function(){var e=Object(R.g)();return Object(P.jsx)("div",{className:"back-button",style:{paddingBottom:"10px"},children:Object(P.jsx)("button",{onClick:function(){return e.push("/")},children:"Return Home"})})};y.a.apps.length?re=y.a.app().firestore():(y.a.initializeApp(w),re=y.a.firestore());var se,ie=function(e){e.match,e.location;var t=Object(R.h)().search,n=E(),a=n.width,c=n.height,s=Object(r.useState)(.7*a),i=Object(o.a)(s,2),u=i[0],b=i[1],O={client:{padding:"5px","border-radius":"5px","background-color":"#0574DD",color:"white",maxWidth:"".concat(.8*u,"px"),"margin-right":"5px","margin-left":"auto"},provider:{padding:"5px","border-radius":"5px","background-color":"white",color:"black",maxWidth:"".concat(.8*u,"px"),"margin-left":"5px","margin-right":"auto"}},v=new URLSearchParams(t).get("provider"),x=ae(),m=Object(r.useState)(!1),f=Object(o.a)(m,2),_=(f[0],f[1],Object(r.useState)(!1)),S=Object(o.a)(_,2),w=(S[0],S[1],Object(r.useRef)());function F(){return F=Object(d.a)(j.a.mark((function e(n){var a,r,c,s,i,o,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URLSearchParams(t).get("provider"),r=new URLSearchParams(t).get("chat"),n.preventDefault(),c=w.current.value,console.log("Message: "+c),e.prev=5,s=Date.now(),i=re.collection("serviceProviders").doc(a).collection("conversations").doc(r).collection("messages").doc(),o=re.collection("serviceProviders").doc(a).collection("conversations").doc(r),e.next=11,i.set({message:c,message_sent_by:"client",timestamp:s,provider_read_status:"unread"});case 11:o.update({last_message_sent:c,last_message_sent_by:"client",timestamp:s,provider_read_status:"unread"}).then((function(){w.current.value=""})),(u=re.collection("serviceProviders").doc(a)).get().then(function(){var e=Object(d.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data().msgs_notifications,a.push(r),e.next=4,u.update({msgs_notifications:(n=y.a.firestore.FieldValue).arrayUnion.apply(n,Object(l.a)(a))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log("message sent: "+c),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),console.log("error is: "+e.t0);case 20:case"end":return e.stop()}}),e,null,[[5,17]])}))),F.apply(this,arguments)}return Object(r.useEffect)((function(){b(a<672||a<990?.8*a:.5*a)}),[a,c]),"DN_EXIST"===x?Object(P.jsx)(R.a,{to:"/"}):Object(P.jsxs)("div",{style:{maxHeight:c},children:[Object(P.jsx)(ce,{}),Object(P.jsx)("div",{style:{display:"grid","place-items":"center","align-content":"center",paddingLeft:"10px"},children:x?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(h.a,{style:{width:"".concat(u,"px"),height:"".concat(.7*c,"px"),position:"absolute",maxHeight:"".concat(.7*c,"px"),overflowY:"auto",top:"12%"},children:x.map((function(e,t){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("br",{}),Object(P.jsx)("div",{style:O[e.message_sent_by],children:Object(P.jsxs)("li",{style:{listStyle:"none"},children:["client"===e.message_sent_by?Object(P.jsx)("h5",{children:"you:"}):Object(P.jsxs)("h5",{children:[v,":"]}),Object(P.jsx)("h4",{children:e.message})]},t)})]})}))}),Object(P.jsx)("div",{style:{position:"absolute",bottom:"0px",display:"table"},children:Object(P.jsx)(p.a,{inline:!0,onSubmit:function(e){return F.apply(this,arguments)},children:Object(P.jsxs)("div",{style:{display:"table-row"},children:[Object(P.jsx)("div",{style:{display:"table-cell"},children:Object(P.jsx)(p.a.Group,{id:"message",children:Object(P.jsx)(p.a.Control,{type:"text",ref:w,placeholder:"Type message",required:!0})})}),Object(P.jsx)("div",{style:{display:"table-cell"},children:Object(P.jsx)(g.a,{type:"submit",children:"Send Message"})})]})})})]}):Object(P.jsx)(B.a,{animation:"border"})})]})};y.a.apps.length?se=y.a.app().firestore():(se=y.a.firestore(),y.a.initializeApp(S));var oe,le=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(R.h)().search;return Object(r.useEffect)((function(){var e=new URLSearchParams(c);if(e.has("bookingref")&&e.has("provider")){var t=new URLSearchParams(c).get("provider"),n=new URLSearchParams(c).get("bookingref"),r=se.collection("serviceProviders").doc(t).collection("bookingrequests").doc(n).collection("messages").orderBy("timestamp","asc").onSnapshot(function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],console.log("convo hook rerunning"),t.forEach((function(e){var t=e.id;e.data().message_sent_by,n.push({message:e.data().message,timestamp:e.data().timestamp,message_sent_by:e.data().message_sent_by,messageID:t})})),a(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(){a("DN_EXIST")}));return function(){return r()}}a("DN_EXIST")}),[]),console.log("messages: "+JSON.stringify(n)),n};y.a.apps.length?oe=y.a.app().firestore():(oe=y.a.firestore(),y.a.initializeApp(S));var de,ue=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(R.h)().search;return Object(r.useEffect)((function(){var e=new URLSearchParams(c);if(e.has("bookingref")&&e.has("provider")){var t=new URLSearchParams(c).get("provider"),n=new URLSearchParams(c).get("bookingref"),r=oe.collection("serviceProviders").doc(t).collection("bookingrequests").doc(n).onSnapshot((function(e){a(e.data())}),(function(){a("DN_EXIST")}));return function(){return r()}}a("DN_EXIST")}),[]),n};y.a.apps.length?de=y.a.app().firestore():(y.a.initializeApp(w),de=y.a.firestore());var je=function(e){e.match,e.location;var t=E(),n=t.width,a=t.height,c=Object(r.useState)(.7*n),s=Object(o.a)(c,2),i=s[0],u=s[1],b={client:{padding:"5px","border-radius":"5px","background-color":"#0574DD",color:"white",maxWidth:"".concat(.4*n,"px"),"margin-right":"5px","margin-left":"auto"},provider:{padding:"5px","border-radius":"5px","background-color":"white",color:"black",maxWidth:"".concat(.4*n,"px"),"margin-left":"5px","margin-right":"auto"}},O=Object(R.h)().search,v=le(),x=ue(),m=Object(r.useRef)(),f=new URLSearchParams(O).get("provider");function _(){return _=Object(d.a)(j.a.mark((function e(t){var n,a,r,c,s,i,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams(O).get("provider"),a=new URLSearchParams(O).get("bookingref"),t.preventDefault(),r=m.current.value,console.log("Message: "+r),e.prev=5,c=Date.now(),s=de.collection("serviceProviders").doc(n).collection("bookingrequests").doc(a).collection("messages").doc(),i=de.collection("serviceProviders").doc(n).collection("bookingrequests").doc(a),e.next=11,s.set({message:r,message_sent_by:"client",timestamp:c,provider_read_status:"unread"});case 11:i.update({last_message_sent:r,last_message_sent_by:"client",timestamp:c,provider_read_status:"unread"}).then((function(){m.current.value=""})),(o=de.collection("serviceProviders").doc(n)).get().then(function(){var e=Object(d.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data().booking_requests_notifications,r.push(a),e.next=4,o.update({booking_requests_notifications:(n=y.a.firestore.FieldValue).arrayUnion.apply(n,Object(l.a)(r))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log("message sent: "+r),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),console.log("error is: "+e.t0);case 20:case"end":return e.stop()}}),e,null,[[5,17]])}))),_.apply(this,arguments)}return Object(r.useEffect)((function(){u(n<672||n<990?.8*n:.5*n)}),[n,a]),"DN_EXIST"===x||"DN_EXIST"===v?Object(P.jsx)(R.a,{to:"/"}):Object(P.jsxs)("div",{style:{maxHeight:a},children:[Object(P.jsx)("div",{children:Object(P.jsx)(ce,{})}),Object(P.jsx)("h2",{style:{position:"absolute",top:"0%"},children:" Your Booking Request"}),Object(P.jsx)("br",{}),x&&v?Object(P.jsxs)("div",{style:{display:"grid","place-items":"center","align-content":"center"},children:[Object(P.jsx)(h.a,{style:{width:"".concat(i,"px"),position:"absolute",maxHeight:"".concat(.25*a,"px"),overflowY:"auto",top:"10%"},children:Object(P.jsxs)(h.a.Body,{children:[Object(P.jsx)(h.a.Title,{children:x.client_name}),Object(P.jsxs)(h.a.Text,{children:["Service: ",x.service_requested,"Notes: ",x.service_notes,Object(P.jsx)(p.a.Label,{children:"Event Start"}),Object(P.jsx)(h.a.Text,{type:"text",disabled:!0,placeholder:"".concat(new Date(x.startTime).toString())}),Object(P.jsx)("br",{}),Object(P.jsx)(p.a.Label,{children:"Event End"}),Object(P.jsx)(h.a.Text,{type:"text",disabled:!0,placeholder:"".concat(new Date(x.endTime).toString())})]})]})}),Object(P.jsx)("br",{}),Object(P.jsx)(h.a,{style:{width:"".concat(i,"px"),height:"".concat(.4*a,"px"),display:"block",maxHeight:"".concat(.4*a,"px"),overflowY:"auto",top:"50%"},children:v.map((function(e,t){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("div",{style:b[e.message_sent_by],children:Object(P.jsxs)("li",{style:{"list-style":"none"},children:["client"===e.message_sent_by?Object(P.jsx)("h5",{children:"you:"}):Object(P.jsxs)("h5",{children:[f,":"]}),Object(P.jsx)("h4",{children:e.message})]},t)}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{})]})}))}),Object(P.jsx)("div",{style:{position:"absolute",bottom:"0px",display:"table"},children:Object(P.jsx)(p.a,{inline:!0,onSubmit:function(e){return _.apply(this,arguments)},children:Object(P.jsxs)("div",{style:{display:"table-row"},children:[Object(P.jsx)("div",{style:{display:"table-cell"},children:Object(P.jsx)(p.a.Group,{id:"message",children:Object(P.jsx)(p.a.Control,{type:"text",ref:m,placeholder:"Type message",required:!0})})}),Object(P.jsx)("div",{style:{display:"table-cell"},children:Object(P.jsx)(g.a,{type:"submit",children:"Send Message"})})]})})})]}):Object(P.jsx)(B.a,{animation:"border"})]})};n(100).io,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT;var be=function(){return Object(P.jsxs)("div",{className:"Lost",children:[Object(P.jsx)("h1",{children:" The page you are looking for doesn't exist "}),Object(P.jsx)("br",{}),Object(P.jsx)("h2",{children:" Navigate to servviio.com to create a site for your service "})]})};y.a.apps.length?y.a.app().firestore():(y.a.firestore(),y.a.initializeApp(S));var he,pe;n(100).io,n(127);y.a.apps.length?pe=y.a.app().firestore():(y.a.initializeApp(S),pe=y.a.firestore());Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT;var ge=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!0),s=Object(o.a)(c,2),i=(s[0],s[1]),l=Object(R.h)(),d=Object(r.useState)(!1),u=Object(o.a)(d,2),j=u[0],b=u[1],h=Object(r.useState)(!1),p=Object(o.a)(h,2),g=p[0],v=(p[1],Object(r.useState)(!1)),x=Object(o.a)(v,2),m=x[0],f=x[1],_=Object(r.useState)(null),S=Object(o.a)(_,2);function w(){console.log("href url: "+window.location.href),console.log("document url: "+document.URL);var e=new URL(document.URL);console.log("hostname: "+e.hostname);var t=e.hostname;he=(he=t.replace(".myservviio.com","")).replace(".localhost",""),null===n&&pe.collection("serviceProviders").doc(he).get().then((function(e){e.exists?(a({site_name:e.id,service_content:e.data()}),i(!1)):b(!0)}),(function(e){console.log("provider probably doesn't exist, error was: "+e)}))}return S[0],S[1],Object(r.useEffect)((function(){y.a.auth().currentUser?w():y.a.auth().signInAnonymously().then((function(){w()}),(function(){f(!0)}))}),[]),!0===j?Object(P.jsx)(be,{}):m?void O.a:null!==n&&void 0!==n&&n?Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)("div",{className:"landingPage",children:[Object(P.jsx)("div",{style:{padding:"40px"},children:!g&&"/booking-request/details"!==l.pathname&&"/conversations"!==l.pathname&&Object(P.jsx)(Z,{serviceContent:n})}),Object(P.jsx)("div",{children:Object(P.jsxs)(R.d,{children:[Object(P.jsxs)(R.b,{exact:!0,path:"/",children:[!n&&Object(P.jsx)(B.a,{}),n&&Object(P.jsx)(ee,{serviceContent:n})]}),Object(P.jsx)(R.b,{exact:!0,path:"/services",children:Object(P.jsxs)("div",{children:[!n&&Object(P.jsx)(B.a,{}),Object(P.jsx)(H,{serviceContent:n})]})}),Object(P.jsxs)(R.b,{exact:!0,path:"/send-me-a-booking-request",children:[!n&&Object(P.jsx)(B.a,{}),n&&Object(P.jsx)(L,{serviceContent:n})]}),Object(P.jsxs)(R.b,{exact:!0,path:"/booking-request/details",children:[!n&&Object(P.jsx)(B.a,{}),Object(P.jsx)(je,{})]}),Object(P.jsxs)(R.b,{exact:!0,path:"/gallery",children:[!n&&Object(P.jsx)(B.a,{}),n&&Object(P.jsx)(V,{serviceContent:n})]}),Object(P.jsxs)(R.b,{exact:!0,path:"/send-me-a-message",children:[!n&&Object(P.jsx)(B.a,{}),n&&Object(P.jsx)(ne,{serviceContent:n})]}),Object(P.jsx)(R.b,{exact:!0,path:"/conversations",children:Object(P.jsx)(ie,{})}),Object(P.jsx)(R.b,{children:Object(P.jsx)(C,{})})]})})]})}):Object(P.jsx)(B.a,{animation:"border"})},Oe=(n(217),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,238)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))});i.a.render(Object(P.jsx)(c.a.StrictMode,{children:Object(P.jsx)(M.a,{children:Object(P.jsx)(ge,{})})}),document.getElementById("root")),Oe()},62:function(e){e.exports=JSON.parse('{"a":{"theme-1":{"id":"T_001","name":"Pink_Red_Text","colors":{"body":"#FFFFFF","text":"#fc035a","background":"#FFFFFF"}},"theme-2":{"id":"T_002","name":"Pink_Red_Background","colors":{"body":"#fc035a","text":"#FFFFFF","background":"#fc035a"}},"theme-3":{"id":"T_003","name":"Light_Blue_Text","colors":{"body":"#FFFFFF","text":"#00aeff","background":"#FFFFFF"}},"theme-4":{"id":"T_004","name":"Light_Blue_Background","colors":{"body":"#00aeff","text":"#FFFFFF","background":"#00aeff"}},"theme-5":{"id":"T_005","name":"Navy_Text","colors":{"body":"#FFFFFF","text":"#02184a","background":"#FFFFFF"}},"theme-6":{"id":"T_006","name":"Navy_Background","colors":{"body":"#02184a","text":"#FFFFFF","background":"#02184a"}},"theme-7":{"id":"T_007","name":"Blue_Green_Text","colors":{"body":"#FFFFFF","text":"#00ffb7","background":"#FFFFFF"}},"theme-8":{"id":"T_008","name":"Blue_Green_Background","colors":{"body":"#00ffb7","text":"#FFFFFF","background":"#00ffb7"}},"theme-9":{"id":"T_009","name":"Purple_Pink_Text","colors":{"body":"#FFFFFF","text":"#a60aa6","background":"#FFFFFF"}},"theme-10":{"id":"T_010","name":"Purple_Pink_Background","colors":{"body":"#a60aa6","text":"#FFFFFF","background":"#a60aa6"}}}}')}},[[218,1,2]]]);
//# sourceMappingURL=main.1950009e.chunk.js.map