(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{121:function(e,t,n){},157:function(e,t,n){},218:function(e,t,n){"use strict";n.r(t);var a,r=n(1),c=n.n(r),s=n(37),i=n.n(s),o=(n(157),n(12)),l=(n(121),n(27)),d=n(7),u=n(0),j=n.n(u),b=n(234),h=n(233),p=n(143),g=n(228),O=n(147),v=n(105),x=n(136),m=n(137),f=n(138),_=n(20),y=(n(42),n(65),n(163),{apiKey:"AIzaSyBA8Oj4PDbc826IzdhGDDU579yJ2pL3N9o",authDomain:"serviiotest.firebaseapp.com",projectId:"serviiotest",storageBucket:"serviiotest.appspot.com",messagingSenderId:"199172448030",appId:"1:199172448030:web:c83109d3e1e9101e3ff30f",measurementId:"G-QL4CWBDQQJ"}),S=y;_.a.apps.length?a=_.a.app().firestore():(_.a.initializeApp(y),a=_.a.firestore());var F,w=function(e){var t=Object(r.useState)([]),n=Object(o.a)(t,2),c=n[0],s=n[1];return Object(r.useEffect)((function(){var t=a.collection("serviceProviders").doc(e).collection("events").onSnapshot(function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],t.forEach((function(e){"none"===e.data().recurrence_type?n.push({id:e.id,title:"UNAVAILABLE",start:e.data().event_start,end:e.data().event_end,startStr:e.data().event_start_datetimeISO,endStr:e.data().event_end_datetimeISO,notes:e.data().event_notes,recurrence_type:"none"}):null===e.data().endTime?n.push({id:e.id,title:"UNAVAILABLE",notes:e.data().event_notes,daysOfWeek:e.data().daysOfWeek,startTime:e.data().startTime,endTime:e.data().endTime,startRecur:e.data().startRecur,recurrence_type:"simple_recurrence"}):n.push({id:e.id,title:"UNAVAILABLE",notes:e.data().event_notes,daysOfWeek:e.data().daysOfWeek,startRecur:e.data().startRecur,endRecur:e.data().endRecur,startTime:e.data().startTime,endTime:e.data().endTime,recurrence_type:"simple_recurrence"})})),s(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){return t()}}),[]),console.log("events: "+JSON.stringify(c)),c},k=n(140),T=n.n(k),E=n(30),R=n(4);_.a.apps.length?F=_.a.app().firestore():(_.a.initializeApp(S),F=_.a.firestore());var D=function(e){var t=e.serviceContent,n=Object(r.useState)(null),a=Object(o.a)(n,2),c=a[0],s=a[1],i=Object(r.useRef)(),u=Object(r.useRef)(),y=Object(r.useRef)(),S=Object(r.useRef)(),k=Object(r.useRef)(),D=w(t.site_name),P=Object(r.useState)(null),L=Object(o.a)(P,2),C=(L[0],L[1]),N=Object(r.useState)(null),I=Object(o.a)(N,2),A=I[0],B=I[1],U=t.service_content.services,q=Object(r.useState)("timeGridWeek"),W=Object(o.a)(q,2),V=W[0],G=(W[1],Object(r.useState)(new Date)),z=Object(o.a)(G,2),H=z[0],M=(z[1],Object(r.useState)(new Date)),J=Object(o.a)(M,2),K=J[0],X=J[1],Y=Object(r.useState)(new Date),Q=Object(o.a)(Y,2),Z=Q[0],$=Q[1],ee=Object(r.useState)(null),te=Object(o.a)(ee,2),ne=te[0],ae=te[1],re=Object(r.useState)(""),ce=Object(o.a)(re,2),se=ce[0],ie=ce[1],oe=Object(E.h)(),le=(oe.pathname,oe.hash,oe.key,Object(E.g)(),new Date),de=Object(r.useRef)();function ue(){return ue=Object(d.a)(j.a.mark((function e(n){var a,r,c,o,b,h,p,g,O,v,x,m,f;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a=i.current.value,r=y.current.value,c=u.current.value,o=S.current.value,b=k.current.value,console.log("Name: "+a),console.log("Email: "+r),console.log("Message: "+c),e.prev=9,console.log("service_requested is: "+se),console.log("offered services are: "+JSON.stringify(A)),null!==ne){e.next=17;break}return alert("Please select a date"),e.abrupt("return",null);case 17:if(null!==se&&""!==se){e.next=20;break}return alert("Please select a service"),e.abrupt("return",null);case 20:console.log("serviceRequested object: "+JSON.stringify(A)),h=Date.now(),p=F.collection("serviceProviders").doc(t.site_name).collection("bookingrequests").doc(),g=p.id,O=new Date(Z.toISOString()),v=parseFloat(A.duration),x=36e5*v,m=new Date(O.getTime()+x),console.log("service length is: "+v),p.set({last_message_sent:c,last_message_sent_by:"client",client_name:a,client_email:r,service_requested:o,service_notes:b,timestamp:h,booking_status:"pending",provider_read_status:"unread",startTime:Z.toISOString(),endTime:m.toISOString()}).then((function(){F.collection("serviceProviders").doc(t.site_name).collection("bookingrequests").doc(g).collection("messages").add({message:c,client_name:a,client_email:r,message_sent_by:"client",timestamp:h,provider_read_status:"unread"}).then((function(){return u.current.value="",s(!0),null}))})),(f=F.collection("serviceProviders").doc(t.site_name)).get().then(function(){var e=Object(d.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data().booking_requests_notifications,a.push(g),e.next=4,f.update({booking_requests_notifications:(n=_.a.firestore.FieldValue).arrayUnion.apply(n,Object(l.a)(a))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(9),console.log("error is: "+e.t0),s(!1);case 38:case"end":return e.stop()}}),e,null,[[9,34]])}))),ue.apply(this,arguments)}return Object(r.useEffect)((function(){console.log("services: "+JSON.stringify(t.service_content.services));var e=0;if(U)for(console.log("running if in useEffect"),e=0;e<U.length;e++)U[e].service_name===se&&B(U[e])}),[se]),null===c?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("div",{children:Object(R.jsx)("h1",{children:"Send a Booking Request"})}),Object(R.jsx)("div",{children:Object(R.jsx)(O.a,{plugins:[v.b,x.a,m.a,f.a],initialView:V,events:D,initialDate:H,ref:de,customButtons:{changeToMonthView:{text:"Month",click:function(){de.current.getApi().changeView("dayGridMonth",K.date)}},changeToWeekView:{text:"Week",click:function(){de.current.getApi().changeView("timeGridWeek",K.date)}},changeToTodayView:{text:"Today",click:function(){de.current.getApi().changeView("timeGridDay",le)}}},dateClick:function(e){(console.log("Full Calendar API date is: "+e.date+" type is: "+typeof e.date),console.log("date.dateStr is: "+e.dateStr+" type is: "+typeof e.dateStr),console.log("date.date is: "+e.date.toDateString()),X(e.date),"timeGridDay"===de.current.getApi().view.type)?document.getElementById("sendBookingRequest").scrollIntoView({behavior:"smooth"}):de.current.getApi().changeView("timeGridDay",e.date)},headerToolbar:{center:"title",left:"changeToTodayView changeToWeekView changeToMonthView",right:"prev,next"}})}),Object(R.jsx)("div",{children:Object(R.jsxs)(b.a,{children:[Object(R.jsx)(b.a.Title,{children:"Send Booking Request"}),Object(R.jsx)(b.a.Body,{children:Object(R.jsxs)(h.a,{id:"sendBookingRequest",onSubmit:function(e){return ue.apply(this,arguments)},children:[Object(R.jsxs)(h.a.Group,{id:"name",children:[Object(R.jsx)(h.a.Label,{children:"Name"}),Object(R.jsx)(h.a.Control,{type:"text",ref:i,placeholder:"name",required:!0})]}),Object(R.jsxs)(h.a.Group,{id:"email",children:[Object(R.jsx)(h.a.Label,{children:"Email"}),Object(R.jsx)(h.a.Control,{type:"email",ref:y,placeholder:"email",required:!0})]}),Object(R.jsx)(h.a.Label,{children:"Select Service"}),Object(R.jsxs)(h.a.Control,{"aria-label":"Select Service",as:"select",value:se,onChange:function(e){console.log("e.target.value",e.target.value),C(e),ie(e.target.value)},children:[Object(R.jsx)("option",{ref:S,value:""}),U.map((function(e,t){return Object(R.jsx)("option",{ref:S,value:e.service_name,children:e.service_name})}))]}),Object(R.jsxs)(h.a.Group,{id:"notes",children:[Object(R.jsx)(h.a.Label,{children:"Extra Notes"}),Object(R.jsx)(h.a.Control,{type:"text",ref:k,placeholder:"Type message"})]}),Object(R.jsx)("br",{}),Object(R.jsx)(T.a,{onChange:function(e){$(e),ae(!0)},value:Z,disableClock:!0}),Object(R.jsx)("br",{}),Object(R.jsxs)(h.a.Group,{id:"message",children:[Object(R.jsx)(h.a.Label,{children:"Message"}),Object(R.jsx)(h.a.Control,{type:"text",ref:u,placeholder:"Type message"})]}),Object(R.jsx)(p.a,{type:"submit",children:"Submit Booking Request"})]})})]})})]}):Object(R.jsx)("div",{children:c?Object(R.jsxs)(g.a,{variant:"success",children:["Your message was successfully sent to ",t.service_content.page_title,Object(R.jsx)("br",{}),"We will send you an email when ",t.service_content.page_title," responds to your message."]}):Object(R.jsxs)(g.a,{variant:"danger",children:["Error occurred, please contact support",Object(R.jsx)("br",{})]})})};n(100).io,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT;var P,L=function(){return Object(R.jsxs)("div",{className:"Lost",children:[Object(R.jsx)("h1",{children:" The page you are looking for doesn't exist "}),Object(R.jsx)("br",{}),Object(R.jsx)("h2",{children:" Use navigation bar above to navigate to existing pages "})]})};_.a.apps.length?(_.a.app().firestore(),P=_.a.app().firestore(),_.a.firestore.FieldValue.serverTimestamp):(_.a.firestore(),_.a.initializeApp(y),P=_.a.firestore(),_.a.firestore.FieldValue.serverTimestamp);var C,N=function(e){var t=Object(r.useState)([]),n=Object(o.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){var t=P.collection("serviceProviders").doc(e).onSnapshot((function(e){var t;t=e.data().gallery_images,c(t)}));return function(){return t()}}),[e]),{docs:a}},I=n(229),A=function(e){var t=e.provider_Name,n=e.setSelectedImg,a=N(t).docs;return Object(R.jsxs)("div",{className:"img-grid",children:[!a&&Object(R.jsx)(I.a,{animation:"border"}),a&&a.map((function(e,t){return Object(R.jsx)("div",{className:"img-wrap",layout:!0,whileHover:{opacity:1},s:!0,onClick:function(){return n(e.url)},children:Object(R.jsx)("img",{src:e.url,alt:"uploaded pic",initial:{opacity:0},animate:{opacity:1},transition:{delay:1}})},t)}))]})},B=n(231),U=function(e){var t=e.setSelectedImg,n=e.selectedImg;return Object(R.jsx)(B.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&t(null)},initial:{opacity:0},animate:{opacity:1},children:Object(R.jsx)(B.a.img,{src:n,alt:"enlarged pic",initial:{y:"-100vh"},animate:{y:0}})})};function q(e){var t=e.serviceContent,n=Object(r.useState)(null),a=Object(o.a)(n,2),c=a[0],s=a[1],i=t.site_name;return null===i?Object(R.jsx)(I.a,{animation:"border"}):Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("h1",{children:" Gallery "}),0===t.service_content.gallery_images.length?Object(R.jsx)("h2",{children:"No Images Added Yet"}):Object(R.jsxs)("div",{className:"Gallery",children:[i&&Object(R.jsx)(A,{provider_Name:i,setSelectedImg:s}),c&&Object(R.jsx)(U,{selectedImg:c,setSelectedImg:s})]})]})}_.a.apps.length?_.a.app().firestore():(_.a.initializeApp(y),_.a.firestore()),_.a.apps.length?C=_.a.app().firestore():(C=_.a.firestore(),_.a.initializeApp(y));var W=function(e){console.log("admin_data in useServicList: "+e);var t=Object(r.useState)(null),n=Object(o.a)(t,2),a=n[0],c=n[1];return console.log("serviceList render ran again..."),Object(r.useEffect)((function(){var t=C.collection("serviceProviders").doc(e).onSnapshot((function(e){var t,n;return new Promise((function(a,r){t=e.data().services,n=e.data().service_categories,console.log("useEffect serviceList ran again..."),a({services:t,serviceCategories:n})})).then(function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a,r,c,s=[],i=t.services,o=t.serviceCategories;if(i&&o)if(0===o.length)e("NO_SERVICES");else for(console.log("services and categories set"),a=0;a<o.length;a++){var l={};for(c=[],r=0;r<i.length;r++)console.log("service category: "+o[a]+" service name: "+JSON.stringify(i[r])),i[r].main_category===o[a].toString()&&c.push(i[r]),r===i.length-1&&(l[o[a]]=c,s.push(l));a===o.length-1&&(console.log("Services inside loop: "+JSON.stringify(l)),console.log("ServiceReady has been set to true"),e(s))}console.log("numbers is about to change/cause rerender...")})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){c(e)}))}));return function(){return t()}}),[]),a},V=n(235);_.a.apps.length?_.a.app().firestore():(_.a.initializeApp(y),_.a.firestore());var G=function(e){var t=e.serviceContent;console.log("Calendar rerendered"),console.log("admin_data in Calendar: "+t.site_name);var n=W(t.site_name);return 0!==t.service_content.service_categories.length?null===n?Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(I.a,{animation:"border"})}):Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("h1",{children:"Services"}),Object(R.jsx)("div",{children:n.map((function(e,t){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(b.a,{children:[Object(R.jsxs)(b.a.Header,{children:[Object.keys(e)[0],Object(R.jsx)("br",{})]}),Object(R.jsx)(V.a,{variant:"flush",children:Object.values(e)[0].map((function(e,t){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(b.a,{children:Object(R.jsxs)(V.a.Item,{children:[Object(R.jsxs)(b.a.Title,{children:[e.service_name,Object(R.jsx)("br",{})]}),Object(R.jsx)("br",{}),Object(R.jsxs)(b.a.Subtitle,{children:["Price: \xa3",e.price]}),Object(R.jsx)("br",{}),Object(R.jsxs)(b.a.Subtitle,{children:["Duration: ",e.duration," hour(s)"]}),Object(R.jsx)("br",{}),Object(R.jsx)(b.a.Text,{children:e.description})]})}),Object(R.jsx)("br",{})]})}))})]}),Object(R.jsx)("br",{}),Object(R.jsx)("br",{})]})}))})]}):Object(R.jsx)("h2",{children:"No Services Added Yet"})},z=n(33),H=n(62);function M(){var e=Object(r.useState)({width:window.innerWidth,height:window.innerHeight}),t=Object(o.a)(e,2),n=t[0],a=t[1];function c(){a({width:window.innerWidth,height:window.innerHeight})}return Object(r.useEffect)((function(){return window.addEventListener("resize",c),c(),function(){window.removeEventListener("resize",c)}}),[]),n}var J=n(232),K=n(236),X=n(230),Y=n(71);var Q=function(e){var t=e.serviceContent,n=Object(r.useState)(375),a=Object(o.a)(n,2),c=a[0],s=a[1],i=M(),l=i.width,d=i.height,u=t.service_content.page_theme.theme_name;return Object(r.useEffect)((function(){s(l)}),[l,d]),c<1024?Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)(J.a,{className:"topnav",style:{"background-color":H.a[u].colors.background,height:"15vh"},children:[Object(R.jsx)(z.b,{style:{textDecoration:"none",color:H.a[u].colors.text,"font-weight":"bold"},to:"/",children:Object(R.jsx)("div",{children:Object(R.jsx)("h1",{children:t.service_content.page_title})})}),Object(R.jsx)(J.a.Toggle,{"aria-controls":"navbar-dark-example"}),Object(R.jsx)(J.a.Collapse,{style:{"z-index":"20"},id:"navbar-dark-example",children:Object(R.jsx)(K.a,{className:"topnav-right",children:Object(R.jsxs)(X.a,{style:{color:H.a[u].colors.text},id:"nav-dropdown-dark-example",title:"Menu",align:"end",children:[Object(R.jsx)(X.a.Item,{style:{color:"black"},href:"/services",children:"Services"}),Object(R.jsx)(Y.a.Divider,{}),Object(R.jsx)(X.a.Item,{style:{color:"black"},href:"/send-me-a-booking-request",children:"Send Booking Request"}),Object(R.jsx)(Y.a.Divider,{}),Object(R.jsx)(X.a.Item,{style:{color:"black"},href:"/send-me-a-message",children:"Send Message"}),Object(R.jsx)(Y.a.Divider,{}),Object(R.jsx)(X.a.Item,{style:{color:"black"},href:"/gallery",children:"Gallery"})]})})})]})}):Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)("div",{className:"topnav",style:{"background-color":H.a[u].colors.background,height:"15vh"},children:[Object(R.jsx)(z.b,{style:{textDecoration:"none",color:H.a[u].colors.text,"font-weight":"bold"},to:"/",children:Object(R.jsx)("div",{children:Object(R.jsx)("h1",{children:t.service_content.page_title})})}),Object(R.jsxs)("div",{className:"topnav-right",children:[Object(R.jsx)(z.b,{style:{textDecoration:"none",color:H.a[u].colors.text,"font-weight":"bold"},to:"/services",children:"Service Info & Pricing"}),Object(R.jsx)(z.b,{style:{textDecoration:"none",color:H.a[u].colors.text,"font-weight":"bold"},to:"/send-me-a-booking-request",children:"Availability & Booking"}),Object(R.jsx)(z.b,{style:{textDecoration:"none",color:H.a[u].colors.text,"font-weight":"bold"},to:"/send-me-a-message",children:"Send Message"}),Object(R.jsx)(z.b,{style:{textDecoration:"none",color:H.a[u].colors.text,"font-weight":"bold"},to:"/gallery",children:"Gallery"})]})]})})};var Z,$=function(e){var t=e.serviceContent,n=t.service_content.page_background_image.url,a=t.service_content.title_tagline_colour.hex_code;return console.log("background image URL:"+n),Object(R.jsxs)("div",{style:{textAlign:"center"},children:[Object(R.jsx)("div",{style:{"background-image":"url(".concat(n,")"),"background-repeat":"no-repeat","background-attachment":"fixed","background-size":"100% 100%","min-height":"85%","max-height":"85%",opacity:"0.4","min-width":"1024px",width:"100%",height:"auto",position:"fixed",bottom:"0",left:"0"}}),Object(R.jsx)("h1",{style:{"font-weight":"bold",color:a,position:"absolute",top:"50%",left:"20%","z-index":"10"},children:t.service_content.page_title}),Object(R.jsx)("br",{}),Object(R.jsxs)("h4",{style:{"font-weight":"bold",color:a,position:"absolute",top:"58%",left:"20%","z-index":"10"},children:[" ",t.service_content.tagline]})]})};n(100).io,n(127),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT;_.a.apps.length?Z=_.a.app().firestore():(_.a.initializeApp(S),Z=_.a.firestore());var ee,te=function(e){var t=e.serviceContent,n=Object(r.useState)(""),a=Object(o.a)(n,2),c=(a[0],a[1],Object(r.useState)("")),s=Object(o.a)(c,2),i=(s[0],s[1],Object(r.useState)("")),u=Object(o.a)(i,2),O=(u[0],u[1],Object(r.useState)(null)),v=Object(o.a)(O,2),x=v[0],m=v[1],f=Object(r.useRef)(),y=Object(r.useRef)(),S=Object(r.useRef)();function F(){return F=Object(d.a)(j.a.mark((function e(n){var a,r,c,s,i,o,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=f.current.value,r=S.current.value,c=y.current.value,e.prev=4,s=Date.now(),i=Z.collection("serviceProviders").doc(t.site_name).collection("conversations").doc(),o=i.id,e.next=10,i.set({last_message_sent:c,last_message_sent_by:"client",client_name:a,client_email:r,timestamp:s,provider_read_status:"unread"});case 10:return e.next=12,Z.collection("serviceProviders").doc(t.site_name).collection("conversations").doc(o).collection("messages").add({message:c,client_name:a,client_email:r,message_sent_by:"client",timestamp:s,provider_read_status:"unread"});case 12:(u=Z.collection("serviceProviders").doc(t.site_name)).get().then(function(){var e=Object(d.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data().msgs_notifications,a.push(o),e.next=4,u.update({msgs_notifications:(n=_.a.firestore.FieldValue).arrayUnion.apply(n,Object(l.a)(a))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m(!0),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),console.log("error is: "+e.t0),m(!1);case 21:case"end":return e.stop()}}),e,null,[[4,17]])}))),F.apply(this,arguments)}return null===x?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("div",{children:Object(R.jsx)("h1",{children:"Send a Message"})}),Object(R.jsx)("div",{children:!x&&Object(R.jsx)(b.a,{children:Object(R.jsx)(b.a.Body,{children:Object(R.jsxs)(h.a,{onSubmit:function(e){return F.apply(this,arguments)},children:[Object(R.jsxs)(h.a.Group,{id:"name",children:[Object(R.jsx)(h.a.Label,{children:"Name"}),Object(R.jsx)(h.a.Control,{type:"text",ref:f,placeholder:"name",required:!0})]}),Object(R.jsxs)(h.a.Group,{id:"email",children:[Object(R.jsx)(h.a.Label,{children:"Email"}),Object(R.jsx)(h.a.Control,{type:"email",ref:S,placeholder:"email",required:!0})]}),Object(R.jsxs)(h.a.Group,{id:"message",children:[Object(R.jsx)(h.a.Label,{children:"Message"}),Object(R.jsx)(h.a.Control,{type:"text",ref:y,placeholder:"Type message",required:!0})]}),Object(R.jsx)(p.a,{type:"submit",children:"Send Message"})]})})})})]}):Object(R.jsx)("div",{children:x?Object(R.jsxs)(g.a,{variant:"success",children:["Your message was successfully sent to ",t.service_content.page_title,Object(R.jsx)("br",{}),"We will send you an email when ",t.service_content.page_title," responds to your message."]}):Object(R.jsxs)(g.a,{variant:"danger",children:["Error occurred, please contact support",Object(R.jsx)("br",{})]})})};_.a.apps.length?ee=_.a.app().firestore():(ee=_.a.firestore(),_.a.initializeApp(y));var ne=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(E.h)().search;return Object(r.useEffect)((function(){var e=new URLSearchParams(c);if(e.has("chat")&&e.has("provider")){var t=new URLSearchParams(c).get("provider"),n=new URLSearchParams(c).get("chat"),r=ee.collection("serviceProviders").doc(t).collection("conversations").doc(n).collection("messages").orderBy("timestamp","asc").onSnapshot(function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],console.log("convo hook rerunning"),t.forEach((function(e){var t=e.id;e.data().message_sent_by,n.push({message:e.data().message,timestamp:e.data().timestamp,message_sent_by:e.data().message_sent_by,messageID:t})})),a(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(){a("DN_EXIST")}));return function(){return r()}}a("DN_EXIST")}),[]),console.log("messages: "+JSON.stringify(n)),n};var ae,re=function(){var e=Object(E.g)();return Object(R.jsx)("div",{className:"back-button",style:{paddingBottom:"10px"},children:Object(R.jsx)("button",{onClick:function(){return e.push("/")},children:"Return Home"})})};_.a.apps.length?ae=_.a.app().firestore():(_.a.initializeApp(S),ae=_.a.firestore());var ce,se=function(e){e.match,e.location;var t=Object(E.h)().search,n=M(),a=n.width,c=n.height,s=Object(r.useState)(.7*a),i=Object(o.a)(s,2),u=i[0],g=i[1],O={client:{padding:"5px","border-radius":"5px","background-color":"#0574DD",color:"white",maxWidth:"".concat(.8*u,"px"),"margin-right":"5px","margin-left":"auto"},provider:{padding:"5px","border-radius":"5px","background-color":"white",color:"black",maxWidth:"".concat(.8*u,"px"),"margin-left":"5px","margin-right":"auto"}},v=new URLSearchParams(t).get("provider"),x=ne(),m=Object(r.useState)(!1),f=Object(o.a)(m,2),y=(f[0],f[1],Object(r.useState)(!1)),S=Object(o.a)(y,2),F=(S[0],S[1],Object(r.useRef)());function w(){return w=Object(d.a)(j.a.mark((function e(n){var a,r,c,s,i,o,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URLSearchParams(t).get("provider"),r=new URLSearchParams(t).get("chat"),n.preventDefault(),c=F.current.value,console.log("Message: "+c),e.prev=5,s=Date.now(),i=ae.collection("serviceProviders").doc(a).collection("conversations").doc(r).collection("messages").doc(),o=ae.collection("serviceProviders").doc(a).collection("conversations").doc(r),e.next=11,i.set({message:c,message_sent_by:"client",timestamp:s,provider_read_status:"unread"});case 11:o.update({last_message_sent:c,last_message_sent_by:"client",timestamp:s,provider_read_status:"unread"}).then((function(){F.current.value=""})),(u=ae.collection("serviceProviders").doc(a)).get().then(function(){var e=Object(d.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data().msgs_notifications,a.push(r),e.next=4,u.update({msgs_notifications:(n=_.a.firestore.FieldValue).arrayUnion.apply(n,Object(l.a)(a))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log("message sent: "+c),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),console.log("error is: "+e.t0);case 20:case"end":return e.stop()}}),e,null,[[5,17]])}))),w.apply(this,arguments)}return Object(r.useEffect)((function(){g(a<672||a<990?.8*a:.5*a)}),[a,c]),"DN_EXIST"===x?Object(R.jsx)(E.a,{to:"/"}):Object(R.jsxs)("div",{style:{maxHeight:c},children:[Object(R.jsx)(re,{}),Object(R.jsx)("div",{style:{display:"grid","place-items":"center","align-content":"center",paddingLeft:"10px"},children:x?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(b.a,{style:{width:"".concat(u,"px"),height:"".concat(.7*c,"px"),position:"absolute",maxHeight:"".concat(.7*c,"px"),overflowY:"auto",top:"12%"},children:x.map((function(e,t){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("br",{}),Object(R.jsx)("div",{style:O[e.message_sent_by],children:Object(R.jsxs)("li",{style:{listStyle:"none"},children:["client"===e.message_sent_by?Object(R.jsx)("h5",{children:"you:"}):Object(R.jsxs)("h5",{children:[v,":"]}),Object(R.jsx)("h4",{children:e.message})]},t)})]})}))}),Object(R.jsx)("div",{style:{position:"absolute",bottom:"0px",display:"table"},children:Object(R.jsx)(h.a,{inline:!0,onSubmit:function(e){return w.apply(this,arguments)},children:Object(R.jsxs)("div",{style:{display:"table-row"},children:[Object(R.jsx)("div",{style:{display:"table-cell"},children:Object(R.jsx)(h.a.Group,{id:"message",children:Object(R.jsx)(h.a.Control,{type:"text",ref:F,placeholder:"Type message",required:!0})})}),Object(R.jsx)("div",{style:{display:"table-cell"},children:Object(R.jsx)(p.a,{type:"submit",children:"Send Message"})})]})})})]}):Object(R.jsx)(I.a,{animation:"border"})})]})};_.a.apps.length?ce=_.a.app().firestore():(ce=_.a.firestore(),_.a.initializeApp(y));var ie,oe=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(E.h)().search;return Object(r.useEffect)((function(){var e=new URLSearchParams(c);if(e.has("bookingref")&&e.has("provider")){var t=new URLSearchParams(c).get("provider"),n=new URLSearchParams(c).get("bookingref"),r=ce.collection("serviceProviders").doc(t).collection("bookingrequests").doc(n).collection("messages").orderBy("timestamp","asc").onSnapshot(function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],console.log("convo hook rerunning"),t.forEach((function(e){var t=e.id;e.data().message_sent_by,n.push({message:e.data().message,timestamp:e.data().timestamp,message_sent_by:e.data().message_sent_by,messageID:t})})),a(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(){a("DN_EXIST")}));return function(){return r()}}a("DN_EXIST")}),[]),console.log("messages: "+JSON.stringify(n)),n};_.a.apps.length?ie=_.a.app().firestore():(ie=_.a.firestore(),_.a.initializeApp(y));var le,de=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(E.h)().search;return Object(r.useEffect)((function(){var e=new URLSearchParams(c);if(e.has("bookingref")&&e.has("provider")){var t=new URLSearchParams(c).get("provider"),n=new URLSearchParams(c).get("bookingref"),r=ie.collection("serviceProviders").doc(t).collection("bookingrequests").doc(n).onSnapshot((function(e){a(e.data())}),(function(){a("DN_EXIST")}));return function(){return r()}}a("DN_EXIST")}),[]),n};_.a.apps.length?le=_.a.app().firestore():(_.a.initializeApp(S),le=_.a.firestore());var ue=function(e){e.match,e.location;var t=M(),n=t.width,a=t.height,c=Object(r.useState)(.7*n),s=Object(o.a)(c,2),i=s[0],u=s[1],g={client:{padding:"5px","border-radius":"5px","background-color":"#0574DD",color:"white",maxWidth:"".concat(.4*n,"px"),"margin-right":"5px","margin-left":"auto"},provider:{padding:"5px","border-radius":"5px","background-color":"white",color:"black",maxWidth:"".concat(.4*n,"px"),"margin-left":"5px","margin-right":"auto"}},O=Object(E.h)().search,v=oe(),x=de(),m=Object(r.useRef)(),f=new URLSearchParams(O).get("provider");function y(){return y=Object(d.a)(j.a.mark((function e(t){var n,a,r,c,s,i,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams(O).get("provider"),a=new URLSearchParams(O).get("bookingref"),t.preventDefault(),r=m.current.value,console.log("Message: "+r),e.prev=5,c=Date.now(),s=le.collection("serviceProviders").doc(n).collection("bookingrequests").doc(a).collection("messages").doc(),i=le.collection("serviceProviders").doc(n).collection("bookingrequests").doc(a),e.next=11,s.set({message:r,message_sent_by:"client",timestamp:c,provider_read_status:"unread"});case 11:i.update({last_message_sent:r,last_message_sent_by:"client",timestamp:c,provider_read_status:"unread"}).then((function(){m.current.value=""})),(o=le.collection("serviceProviders").doc(n)).get().then(function(){var e=Object(d.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data().booking_requests_notifications,r.push(a),e.next=4,o.update({booking_requests_notifications:(n=_.a.firestore.FieldValue).arrayUnion.apply(n,Object(l.a)(r))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log("message sent: "+r),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),console.log("error is: "+e.t0);case 20:case"end":return e.stop()}}),e,null,[[5,17]])}))),y.apply(this,arguments)}return Object(r.useEffect)((function(){u(n<672||n<990?.8*n:.5*n)}),[n,a]),"DN_EXIST"===x||"DN_EXIST"===v?Object(R.jsx)(E.a,{to:"/"}):Object(R.jsxs)("div",{style:{maxHeight:a},children:[Object(R.jsx)("div",{children:Object(R.jsx)(re,{})}),Object(R.jsx)("h2",{style:{position:"absolute",top:"0%"},children:" Your Booking Request"}),Object(R.jsx)("br",{}),x&&v?Object(R.jsxs)("div",{style:{display:"grid","place-items":"center","align-content":"center"},children:[Object(R.jsx)(b.a,{style:{width:"".concat(i,"px"),position:"absolute",maxHeight:"".concat(.25*a,"px"),overflowY:"auto",top:"10%"},children:Object(R.jsxs)(b.a.Body,{children:[Object(R.jsx)(b.a.Title,{children:x.client_name}),Object(R.jsxs)(b.a.Text,{children:["Service: ",x.service_requested,"Notes: ",x.service_notes,Object(R.jsx)(h.a.Label,{children:"Event Start"}),Object(R.jsx)(b.a.Text,{type:"text",disabled:!0,placeholder:"".concat(new Date(x.startTime).toString())}),Object(R.jsx)("br",{}),Object(R.jsx)(h.a.Label,{children:"Event End"}),Object(R.jsx)(b.a.Text,{type:"text",disabled:!0,placeholder:"".concat(new Date(x.endTime).toString())})]})]})}),Object(R.jsx)("br",{}),Object(R.jsx)(b.a,{style:{width:"".concat(i,"px"),height:"".concat(.4*a,"px"),display:"block",maxHeight:"".concat(.4*a,"px"),overflowY:"auto",top:"50%"},children:v.map((function(e,t){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("div",{style:g[e.message_sent_by],children:Object(R.jsxs)("li",{style:{"list-style":"none"},children:["client"===e.message_sent_by?Object(R.jsx)("h5",{children:"you:"}):Object(R.jsxs)("h5",{children:[f,":"]}),Object(R.jsx)("h4",{children:e.message})]},t)}),Object(R.jsx)("br",{}),Object(R.jsx)("br",{})]})}))}),Object(R.jsx)("div",{style:{position:"absolute",bottom:"0px",display:"table"},children:Object(R.jsx)(h.a,{inline:!0,onSubmit:function(e){return y.apply(this,arguments)},children:Object(R.jsxs)("div",{style:{display:"table-row"},children:[Object(R.jsx)("div",{style:{display:"table-cell"},children:Object(R.jsx)(h.a.Group,{id:"message",children:Object(R.jsx)(h.a.Control,{type:"text",ref:m,placeholder:"Type message",required:!0})})}),Object(R.jsx)("div",{style:{display:"table-cell"},children:Object(R.jsx)(p.a,{type:"submit",children:"Send Message"})})]})})})]}):Object(R.jsx)(I.a,{animation:"border"})]})};n(100).io,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT;var je=function(){return Object(R.jsxs)("div",{className:"Lost",children:[Object(R.jsx)("h1",{children:" The page you are looking for doesn't exist "}),Object(R.jsx)("br",{}),Object(R.jsx)("h2",{children:" Navigate to servviio.com to create a site for your service "})]})};_.a.apps.length?_.a.app().firestore():(_.a.firestore(),_.a.initializeApp(y));var be,he;n(100).io,n(127);_.a.apps.length?he=_.a.app().firestore():(_.a.initializeApp(y),he=_.a.firestore());Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT;var pe=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!0),s=Object(o.a)(c,2),i=(s[0],s[1]),l=Object(E.h)(),d=Object(r.useState)(!1),u=Object(o.a)(d,2),j=u[0],b=u[1],h=Object(r.useState)(!1),p=Object(o.a)(h,2),O=p[0],v=(p[1],Object(r.useState)(!1)),x=Object(o.a)(v,2),m=x[0],f=x[1],y=Object(r.useState)(null),S=Object(o.a)(y,2);function F(){console.log("href url: "+window.location.href),console.log("document url: "+document.URL);var e=new URL(document.URL);console.log("hostname: "+e.hostname);var t=e.hostname;be=(be=t.replace(".myservviio.com","")).replace(".localhost",""),null===n&&he.collection("serviceProviders").doc(be).get().then((function(e){e.exists?(a({site_name:e.id,service_content:e.data()}),i(!1)):b(!0)}),(function(e){console.log("provider probably doesn't exist, error was: "+e)}))}return S[0],S[1],Object(r.useEffect)((function(){_.a.auth().currentUser?F():_.a.auth().signInAnonymously().then((function(){F()}),(function(){f(!0)}))}),[]),!0===j?Object(R.jsx)(je,{}):m?void g.a:null!==n&&void 0!==n&&n?Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)("div",{className:"landingPage",children:[Object(R.jsx)("div",{style:{padding:"40px"},children:!O&&"/booking-request/details"!==l.pathname&&"/conversations"!==l.pathname&&Object(R.jsx)(Q,{serviceContent:n})}),Object(R.jsx)("div",{children:Object(R.jsxs)(E.d,{children:[Object(R.jsxs)(E.b,{exact:!0,path:"/",children:[!n&&Object(R.jsx)(I.a,{}),n&&Object(R.jsx)($,{serviceContent:n})]}),Object(R.jsx)(E.b,{exact:!0,path:"/services",children:Object(R.jsxs)("div",{children:[!n&&Object(R.jsx)(I.a,{}),Object(R.jsx)(G,{serviceContent:n})]})}),Object(R.jsxs)(E.b,{exact:!0,path:"/send-me-a-booking-request",children:[!n&&Object(R.jsx)(I.a,{}),n&&Object(R.jsx)(D,{serviceContent:n})]}),Object(R.jsxs)(E.b,{exact:!0,path:"/booking-request/details",children:[!n&&Object(R.jsx)(I.a,{}),Object(R.jsx)(ue,{})]}),Object(R.jsxs)(E.b,{exact:!0,path:"/gallery",children:[!n&&Object(R.jsx)(I.a,{}),Object(R.jsx)(q,{serviceContent:n})]}),Object(R.jsxs)(E.b,{exact:!0,path:"/send-me-a-message",children:[!n&&Object(R.jsx)(I.a,{}),n&&Object(R.jsx)(te,{serviceContent:n})]}),Object(R.jsx)(E.b,{exact:!0,path:"/conversations",children:Object(R.jsx)(se,{})}),Object(R.jsx)(E.b,{children:Object(R.jsx)(L,{})})]})})]})}):Object(R.jsx)(I.a,{animation:"border"})},ge=(n(217),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,237)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))});i.a.render(Object(R.jsx)(c.a.StrictMode,{children:Object(R.jsx)(z.a,{children:Object(R.jsx)(pe,{})})}),document.getElementById("root")),ge()},62:function(e){e.exports=JSON.parse('{"a":{"theme-1":{"id":"T_001","name":"Pink_Red_Text","colors":{"body":"#FFFFFF","text":"#fc035a","background":"#FFFFFF"}},"theme-2":{"id":"T_002","name":"Pink_Red_Background","colors":{"body":"#fc035a","text":"#FFFFFF","background":"#fc035a"}},"theme-3":{"id":"T_003","name":"Light_Blue_Text","colors":{"body":"#FFFFFF","text":"#00aeff","background":"#FFFFFF"}},"theme-4":{"id":"T_004","name":"Light_Blue_Background","colors":{"body":"#00aeff","text":"#FFFFFF","background":"#00aeff"}},"theme-5":{"id":"T_005","name":"Navy_Text","colors":{"body":"#FFFFFF","text":"#02184a","background":"#FFFFFF"}},"theme-6":{"id":"T_006","name":"Navy_Background","colors":{"body":"#02184a","text":"#FFFFFF","background":"#02184a"}},"theme-7":{"id":"T_007","name":"Blue_Green_Text","colors":{"body":"#FFFFFF","text":"#00ffb7","background":"#FFFFFF"}},"theme-8":{"id":"T_008","name":"Blue_Green_Background","colors":{"body":"#00ffb7","text":"#FFFFFF","background":"#00ffb7"}},"theme-9":{"id":"T_009","name":"Purple_Pink_Text","colors":{"body":"#FFFFFF","text":"#a60aa6","background":"#FFFFFF"}},"theme-10":{"id":"T_010","name":"Purple_Pink_Background","colors":{"body":"#a60aa6","text":"#FFFFFF","background":"#a60aa6"}}}}')}},[[218,1,2]]]);
//# sourceMappingURL=main.c23bf2af.chunk.js.map