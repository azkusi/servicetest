(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t,r){},116:function(e,t,r){},140:function(e,t,r){"use strict";r.r(t);var n,a=r(3),c=r.n(a),s=r(52),i=r.n(s),o=(r(105),r(15)),l=r(24),d=r(4),j=r(0),u=r.n(j),b=r(149),p=r(147),h=r(143),g=r(146),O=r(16),v=(r(39),r(107),O.a.initializeApp({apiKey:"AIzaSyBA8Oj4PDbc826IzdhGDDU579yJ2pL3N9o",authDomain:"serviiotest.firebaseapp.com",projectId:"serviiotest",storageBucket:"serviiotest.appspot.com",messagingSenderId:"199172448030",appId:"1:199172448030:web:c83109d3e1e9101e3ff30f",measurementId:"G-QL4CWBDQQJ"})),m={apiKey:"AIzaSyBA8Oj4PDbc826IzdhGDDU579yJ2pL3N9o",authDomain:"serviiotest.firebaseapp.com",projectId:"serviiotest",storageBucket:"serviiotest.appspot.com",messagingSenderId:"199172448030",appId:"1:199172448030:web:c83109d3e1e9101e3ff30f",measurementId:"G-QL4CWBDQQJ"},x=(v.auth(),v),f=r(5);O.a.apps.length?n=O.a.app().firestore():(O.a.initializeApp(x),n=O.a.firestore());var _=function(e){var t=e.serviceContent,r=Object(a.useState)(null),c=Object(o.a)(r,2),s=c[0],i=c[1],j=Object(a.useRef)(),v=Object(a.useRef)(),m=Object(a.useRef)(),x=Object(a.useRef)(),_=Object(a.useRef)(),y=t.service_content.services;function S(){return S=Object(d.a)(u.a.mark((function e(r){var a,c,s,o,b,p,h,g,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a=j.current.value,c=m.current.value,s=v.current.value,o=x.current.value,b=_.current.value,console.log("Name: "+a),console.log("Email: "+c),console.log("Message: "+s),e.prev=9,i(!0),p=Date.now(),h=n.collection("serviceProviders").doc(t.site_name).collection("bookingrequests").doc(),g=h.id,console.log("convorefID is: "+g),e.next=17,h.set({last_message_sent:s,last_message_sent_by:"client",client_name:a,client_email:c,service_requested:o,service_notes:b,timestamp:p,booking_status:"pending",provider_read_status:"unread"});case 17:n.collection("serviceProviders").doc(t.site_name).collection("bookingrequests").doc(g).collection("messages").add({message:s,client_name:a,client_email:c,message_sent_by:"client",timestamp:p,provider_read_status:"unread"}).then((function(){v.current.value=""})),(f=n.collection("serviceProviders").doc(t.site_name)).get().then(function(){var e=Object(d.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data().booking_requests_notifications,n.push(g),e.next=4,f.update({booking_requests_notifications:(r=O.a.firestore.FieldValue).arrayUnion.apply(r,Object(l.a)(n))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(9),console.log("error is: "+e.t0),i(!1);case 26:case"end":return e.stop()}}),e,null,[[9,22]])}))),S.apply(this,arguments)}return Object(a.useEffect)((function(){console.log("store content"+JSON.stringify(t))}),[]),null===s?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{children:Object(f.jsx)("h2",{children:"Services"})}),Object(f.jsx)("div",{children:Object(f.jsx)(b.a,{children:Object(f.jsx)(b.a.Body,{children:Object(f.jsxs)(p.a,{onSubmit:function(e){return S.apply(this,arguments)},children:[Object(f.jsxs)(p.a.Group,{id:"name",children:[Object(f.jsx)(p.a.Label,{children:"Name"}),Object(f.jsx)(p.a.Control,{type:"text",ref:j,placeholder:"name",required:!0})]}),Object(f.jsxs)(p.a.Group,{id:"email",children:[Object(f.jsx)(p.a.Label,{children:"Email"}),Object(f.jsx)(p.a.Control,{type:"email",ref:m,placeholder:"email",required:!0})]}),Object(f.jsx)(p.a.Label,{children:"Select Service"}),Object(f.jsx)(p.a.Select,{"aria-label":"Select Service",children:y.map((function(e,t){return Object(f.jsx)("option",{ref:x,value:t.toString(),children:e.service_name})}))}),Object(f.jsxs)(p.a.Group,{id:"notes",children:[Object(f.jsx)(p.a.Label,{children:"Extra Notes"}),Object(f.jsx)(p.a.Control,{type:"text",ref:_,placeholder:"Type message",required:!0})]}),Object(f.jsxs)(p.a.Group,{id:"message",children:[Object(f.jsx)(p.a.Label,{children:"Message"}),Object(f.jsx)(p.a.Control,{type:"text",ref:v,placeholder:"Type message",required:!0})]}),Object(f.jsx)(h.a,{type:"submit",children:"Submit Booking Request"}),Object(f.jsx)(p.a.Label,{children:"Input service time using calendar:"})]})})})})]}):Object(f.jsx)("div",{children:s?Object(f.jsxs)(g.a,{variant:"success",children:["Your message was successfully sent to ",t.service_content.page_title,Object(f.jsx)("br",{}),"We will send you an email when ",t.service_content.page_title," responds to your message."]}):Object(f.jsxs)(g.a,{variant:"danger",children:["Error occurred, please contact support",Object(f.jsx)("br",{})]})})},y=r(25);r(65).io,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT;var S,F=function(){return Object(f.jsxs)("div",{className:"Lost",children:[Object(f.jsx)("h1",{children:" The page you are looking for doesn't exist "}),Object(f.jsx)("br",{}),Object(f.jsx)("h2",{children:" Use navigation bar above to navigate to existing pages "})]})};r(55);O.a.apps.length?(O.a.app().firestore(),S=O.a.app().firestore(),O.a.firestore.FieldValue.serverTimestamp):(O.a.firestore(),O.a.initializeApp(m),S=O.a.firestore(),O.a.firestore.FieldValue.serverTimestamp);var k,T=function(e){var t=Object(a.useState)([]),r=Object(o.a)(t,2),n=r[0],c=r[1];return Object(a.useEffect)((function(){var t=S.collection("serviceProviders").doc(e).onSnapshot((function(e){var t;t=e.data().gallery_images,c(t)}));return function(){return t()}}),[e]),{docs:n}},P=r(144),w=function(e){var t=e.provider_Name,r=e.setSelectedImg,n=T(t).docs;return Object(f.jsxs)("div",{className:"img-grid",children:[!n&&Object(f.jsx)(P.a,{animation:"border"}),n&&n.map((function(e,t){return Object(f.jsx)("div",{className:"img-wrap",layout:!0,whileHover:{opacity:1},s:!0,onClick:function(){return r(e.url)},children:Object(f.jsx)("img",{src:e.url,alt:"uploaded pic",initial:{opacity:0},animate:{opacity:1},transition:{delay:1}})},t)}))]})},E=r(145),C=function(e){var t=e.setSelectedImg,r=e.selectedImg;return Object(f.jsx)(E.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&t(null)},initial:{opacity:0},animate:{opacity:1},children:Object(f.jsx)(E.a.img,{src:r,alt:"enlarged pic",initial:{y:"-100vh"},animate:{y:0}})})};function D(e){var t=e.serviceContent,r=Object(a.useState)(null),n=Object(o.a)(r,2),c=n[0],s=n[1],i=t.site_name;return null===i?Object(f.jsx)("h4",{children:" Loading... "}):Object(f.jsxs)("div",{className:"Gallery",children:[Object(f.jsx)("h2",{children:" Gallery "}),i&&Object(f.jsx)(w,{provider_Name:i,setSelectedImg:s}),c&&Object(f.jsx)(C,{selectedImg:c,setSelectedImg:s})]})}O.a.apps.length?O.a.app().firestore():(O.a.initializeApp(m),O.a.firestore()),O.a.apps.length?k=O.a.app().firestore():(k=O.a.firestore(),O.a.initializeApp(m));var L=function(e){console.log("admin_data in useServicList: "+e);var t=Object(a.useState)(null),r=Object(o.a)(t,2),n=r[0],c=r[1];return console.log("serviceList render ran again..."),Object(a.useEffect)((function(){var t=k.collection("serviceProviders").doc(e).onSnapshot((function(e){var t,r;return new Promise((function(n,a){t=e.data().services,r=e.data().service_categories,console.log("useEffect serviceList ran again..."),n({services:t,serviceCategories:r})})).then(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n,a,c,s=[],i=t.services,o=t.serviceCategories;if(i&&o)for(console.log("services and categories set"),n=0;n<o.length;n++){var l={};for(c=[],a=0;a<i.length;a++)console.log("service category: "+o[n]+" service name: "+JSON.stringify(i[a])),i[a].main_category===o[n].toString()&&c.push(i[a]),a===i.length-1&&(l[o[n]]=c,s.push(l));n===o.length-1&&(console.log("Services inside loop: "+JSON.stringify(l)),console.log("ServiceReady has been set to true"),e(s))}console.log("numbers is about to change/cause rerender...")})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){c(e)}))}));return function(){return t()}}),[]),n},R=r(148);O.a.apps.length?O.a.app().firestore():(O.a.initializeApp(m),O.a.firestore());var N=function(e){var t=e.serviceContent;console.log("Calendar rerendered"),console.log("admin_data in Calendar: "+t.site_name);var r=L(t.site_name);return r?0===r[0].length?Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("h1",{children:"No Services Added Yet"})}):Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{children:r.map((function(e,t){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(b.a,{children:[Object(f.jsxs)(b.a.Header,{children:[Object.keys(e)[0],Object(f.jsx)("br",{})]}),Object(f.jsx)(R.a,{variant:"flush",children:Object.values(e)[0].map((function(e,t){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(b.a,{children:Object(f.jsxs)(R.a.Item,{children:[Object(f.jsxs)(b.a.Title,{children:[e.service_name,Object(f.jsx)("br",{})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(b.a.Subtitle,{children:["Price: ",e.price]}),Object(f.jsx)("br",{}),Object(f.jsxs)(b.a.Subtitle,{children:["Duration: ",e.duration]}),Object(f.jsx)("br",{}),Object(f.jsx)(b.a.Text,{children:e.description})]})}),Object(f.jsx)("br",{})]})}))})]}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{})]})}))})}):Object(f.jsx)(P.a,{animation:"border"})},I=(r(116),r(31)),B=r(53);var U=function(e){var t=e.serviceContent,r=t.service_content.page_theme.theme_name;return"choice_1"===t.service_content.page_styling?"nav-1":"choice_2"===t.service_content.page_styling?"nav-2":"nav-3",Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("nav",{style:{"background-color":B.a[r].colors.background,height:"15vh"},children:[Object(f.jsx)("div",{children:Object(f.jsx)(I.b,{style:{textDecoration:"none",color:B.a[r].colors.text,"font-weight":"bold"},to:"/",children:t.service_content.page_title})}),Object(f.jsxs)("ul",{className:"nav-link",children:[Object(f.jsx)("li",{style:{"padding-left":"15px","padding-right":"15px"},children:Object(f.jsx)(I.b,{style:{textDecoration:"none",color:B.a[r].colors.text,"font-weight":"bold"},to:"/services",children:"Service Info & Pricing"})}),Object(f.jsx)("li",{style:{"padding-left":"15px","padding-right":"15px"},children:Object(f.jsx)(I.b,{style:{textDecoration:"none",color:B.a[r].colors.text,"font-weight":"bold"},to:"/booking-request",children:"Availability & Booking"})}),Object(f.jsx)("li",{style:{"padding-left":"15px","padding-right":"15px"},children:Object(f.jsx)(I.b,{style:{textDecoration:"none",color:B.a[r].colors.text,"font-weight":"bold"},to:"/gallery",children:"Gallery"})}),Object(f.jsx)("li",{style:{"padding-left":"15px","padding-right":"15px"},children:Object(f.jsx)(I.b,{style:{textDecoration:"none",color:B.a[r].colors.text,"font-weight":"bold"},to:"/messages",children:"Send Message"})})]})]})})};var A,q=function(e){var t=e.serviceContent,r=t.service_content.page_background_image.url,n=t.service_content.title_tagline_colour.hex_code;return console.log("background image URL:"+r),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{style:{"background-image":"url(".concat(r,")"),"background-repeat":"no-repeat","background-attachment":"fixed","background-size":"100% 100%","min-height":"85%","max-height":"85%",opacity:"0.4","min-width":"1024px",width:"100%",height:"auto",position:"fixed",bottom:"0",left:"0"}}),Object(f.jsxs)("h1",{style:{"font-weight":"bold",color:n,"text-align":"center"},children:[" ",t.service_content.page_title]}),Object(f.jsx)("br",{}),Object(f.jsxs)("h3",{style:{"font-weight":"bold",color:n,"text-align":"center"},children:[" ",t.service_content.description]})]})},M=(r(65).io,r(80),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT,function(e){var t=e.serviceContent;return Object(f.jsxs)("div",{className:"Calendar",children:[Object(f.jsxs)("h1",{children:[" ",t.site_name,"'s calendar events - React page "]}),Object(f.jsx)("br",{}),Object(f.jsx)("h3",{children:"More content"}),Object(f.jsx)("br",{}),Object(f.jsx)("h3",{children:"More content"}),Object(f.jsx)("br",{}),Object(f.jsx)("h3",{children:"More content"})]})});O.a.apps.length?A=O.a.app().firestore():(O.a.initializeApp(x),A=O.a.firestore());var z,G=function(e){var t=e.serviceContent,r=Object(a.useState)(""),n=Object(o.a)(r,2),c=(n[0],n[1],Object(a.useState)("")),s=Object(o.a)(c,2),i=(s[0],s[1],Object(a.useState)("")),j=Object(o.a)(i,2),v=(j[0],j[1],Object(a.useState)(null)),m=Object(o.a)(v,2),x=m[0],_=m[1],y=Object(a.useRef)(),S=Object(a.useRef)(),F=Object(a.useRef)();function k(){return k=Object(d.a)(u.a.mark((function e(r){var n,a,c,s,i,o,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),n=y.current.value,a=F.current.value,c=S.current.value,e.prev=4,s=Date.now(),i=A.collection("serviceProviders").doc(t.site_name).collection("conversations").doc(),o=i.id,e.next=10,i.set({last_message_sent:c,last_message_sent_by:"client",client_name:n,client_email:a,timestamp:s,provider_read_status:"unread"});case 10:return e.next=12,A.collection("serviceProviders").doc(t.site_name).collection("conversations").doc(o).collection("messages").add({message:c,client_name:n,client_email:a,message_sent_by:"client",timestamp:s,provider_read_status:"unread"});case 12:(j=A.collection("serviceProviders").doc(t.site_name)).get().then(function(){var e=Object(d.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data().msgs_notifications,n.push(o),e.next=4,j.update({msgs_notifications:(r=O.a.firestore.FieldValue).arrayUnion.apply(r,Object(l.a)(n))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_(!0),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),console.log("error is: "+e.t0),_(!1);case 21:case"end":return e.stop()}}),e,null,[[4,17]])}))),k.apply(this,arguments)}return null===x?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{children:Object(f.jsx)("h2",{children:"Messages"})}),Object(f.jsx)("div",{children:!x&&Object(f.jsx)(b.a,{children:Object(f.jsx)(b.a.Body,{children:Object(f.jsxs)(p.a,{onSubmit:function(e){return k.apply(this,arguments)},children:[Object(f.jsxs)(p.a.Group,{id:"name",children:[Object(f.jsx)(p.a.Label,{children:"Name"}),Object(f.jsx)(p.a.Control,{type:"text",ref:y,placeholder:"name",required:!0})]}),Object(f.jsxs)(p.a.Group,{id:"email",children:[Object(f.jsx)(p.a.Label,{children:"Email"}),Object(f.jsx)(p.a.Control,{type:"email",ref:F,placeholder:"email",required:!0})]}),Object(f.jsxs)(p.a.Group,{id:"message",children:[Object(f.jsx)(p.a.Label,{children:"Message"}),Object(f.jsx)(p.a.Control,{type:"text",ref:S,placeholder:"Type message",required:!0})]}),Object(f.jsx)(h.a,{type:"submit",children:"Send Message"})]})})})})]}):Object(f.jsx)("div",{children:x?Object(f.jsxs)(g.a,{variant:"success",children:["Your message was successfully sent to ",t.service_content.page_title,Object(f.jsx)("br",{}),"We will send you an email when ",t.service_content.page_title," responds to your message."]}):Object(f.jsxs)(g.a,{variant:"danger",children:["Error occurred, please contact support",Object(f.jsx)("br",{})]})})};O.a.apps.length?z=O.a.app().firestore():(z=O.a.firestore(),O.a.initializeApp(m));var W,K=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),r=t[0],n=t[1],c=Object(y.g)().search;return Object(a.useEffect)((function(){var e=new URLSearchParams(c);if(e.has("chat")&&e.has("provider")){var t=new URLSearchParams(c).get("provider"),r=new URLSearchParams(c).get("chat"),a=z.collection("serviceProviders").doc(t).collection("conversations").doc(r).collection("messages").orderBy("timestamp","asc").onSnapshot(function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],console.log("convo hook rerunning"),t.forEach((function(e){var t=e.id;e.data().message_sent_by,r.push({message:e.data().message,timestamp:e.data().timestamp,message_sent_by:e.data().message_sent_by,messageID:t})})),n(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(){n("DN_EXIST")}));return function(){return a()}}n("DN_EXIST")}),[]),console.log("messages: "+JSON.stringify(r)),r};O.a.apps.length?W=O.a.app().firestore():(O.a.initializeApp(x),W=O.a.firestore());var H,J=function(e){e.match,e.location;var t=Object(y.g)().search,r=K(),n=Object(a.useState)(!1),c=Object(o.a)(n,2),s=(c[0],c[1],Object(a.useState)(!1)),i=Object(o.a)(s,2),j=(i[0],i[1],Object(a.useRef)());function g(){return g=Object(d.a)(u.a.mark((function e(r){var n,a,c,s,i,o,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams(t).get("provider"),a=new URLSearchParams(t).get("chat"),r.preventDefault(),c=j.current.value,console.log("Message: "+c),e.prev=5,s=Date.now(),i=W.collection("serviceProviders").doc(n).collection("conversations").doc(a).collection("messages").doc(),o=W.collection("serviceProviders").doc(n).collection("conversations").doc(a),e.next=11,i.set({message:c,message_sent_by:"client",timestamp:s,provider_read_status:"unread"});case 11:o.update({last_message_sent:c,last_message_sent_by:"client",timestamp:s,provider_read_status:"unread"}).then((function(){j.current.value=""})),(b=W.collection("serviceProviders").doc(n)).get().then(function(){var e=Object(d.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data().msgs_notifications,n.push(a),e.next=4,b.update({msgs_notifications:(r=O.a.firestore.FieldValue).arrayUnion.apply(r,Object(l.a)(n))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log("message sent: "+c),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),console.log("error is: "+e.t0);case 20:case"end":return e.stop()}}),e,null,[[5,17]])}))),g.apply(this,arguments)}return"DN_EXIST"===r?Object(f.jsx)(y.a,{to:"/"}):Object(f.jsx)(f.Fragment,{children:r?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{children:r.map((function(e,t){return Object(f.jsx)("li",{children:Object(f.jsx)("h4",{children:e.message})},t)}))}),Object(f.jsx)("div",{children:Object(f.jsx)(b.a,{children:Object(f.jsx)(b.a.Body,{children:Object(f.jsxs)(p.a,{onSubmit:function(e){return g.apply(this,arguments)},children:[Object(f.jsxs)(p.a.Group,{id:"message",children:[Object(f.jsx)(p.a.Label,{children:"Message"}),Object(f.jsx)(p.a.Control,{type:"text",ref:j,placeholder:"Type message",required:!0})]}),Object(f.jsx)(h.a,{type:"submit",children:"Send Message"})]})})})})]}):Object(f.jsx)(P.a,{animation:"border"})})};O.a.apps.length?H=O.a.app().firestore():(H=O.a.firestore(),O.a.initializeApp(m));var V,X=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),r=t[0],n=t[1],c=Object(y.g)().search;return Object(a.useEffect)((function(){var e=new URLSearchParams(c);if(e.has("bookingref")&&e.has("provider")){var t=new URLSearchParams(c).get("provider"),r=new URLSearchParams(c).get("bookingref"),a=H.collection("serviceProviders").doc(t).collection("bookingrequests").doc(r).collection("messages").orderBy("timestamp","asc").onSnapshot(function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],console.log("convo hook rerunning"),t.forEach((function(e){var t=e.id;e.data().message_sent_by,r.push({message:e.data().message,timestamp:e.data().timestamp,message_sent_by:e.data().message_sent_by,messageID:t})})),n(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(){n("DN_EXIST")}));return function(){return a()}}n("DN_EXIST")}),[]),console.log("messages: "+JSON.stringify(r)),r};O.a.apps.length?V=O.a.app().firestore():(V=O.a.firestore(),O.a.initializeApp(m));var Q,Y=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),r=t[0],n=t[1],c=Object(y.g)().search;return Object(a.useEffect)((function(){var e=new URLSearchParams(c);if(e.has("bookingref")&&e.has("provider")){var t=new URLSearchParams(c).get("provider"),r=new URLSearchParams(c).get("bookingref"),a=V.collection("serviceProviders").doc(t).collection("bookingrequests").doc(r).onSnapshot((function(e){n(e.data())}),(function(){n("DN_EXIST")}));return function(){return a()}}n("DN_EXIST")}),[]),r};O.a.apps.length?Q=O.a.app().firestore():(O.a.initializeApp(x),Q=O.a.firestore());var Z=function(e){e.match,e.location;var t=Object(y.g)().search,r=X(),n=Y(),c=Object(a.useRef)();function s(){return s=Object(d.a)(u.a.mark((function e(r){var n,a,s,i,o,j,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams(t).get("provider"),a=new URLSearchParams(t).get("bookingref"),r.preventDefault(),s=c.current.value,console.log("Message: "+s),e.prev=5,i=Date.now(),o=Q.collection("serviceProviders").doc(n).collection("bookingrequests").doc(a).collection("messages").doc(),j=Q.collection("serviceProviders").doc(n).collection("bookingrequests").doc(a),e.next=11,o.set({message:s,message_sent_by:"client",timestamp:i,provider_read_status:"unread"});case 11:j.update({last_message_sent:s,last_message_sent_by:"client",timestamp:i,provider_read_status:"unread"}).then((function(){c.current.value=""})),(b=Q.collection("serviceProviders").doc(n)).get().then(function(){var e=Object(d.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data().booking_requests_notifications,n.push(a),e.next=4,b.update({booking_requests_notifications:(r=O.a.firestore.FieldValue).arrayUnion.apply(r,Object(l.a)(n))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log("message sent: "+s),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),console.log("error is: "+e.t0);case 20:case"end":return e.stop()}}),e,null,[[5,17]])}))),s.apply(this,arguments)}return"DN_EXIST"===n||"DN_EXIST"===r?Object(f.jsx)(y.a,{to:"/"}):Object(f.jsx)(f.Fragment,{children:n&&r?Object(f.jsxs)("div",{children:[Object(f.jsx)(b.a,{children:Object(f.jsxs)(b.a.Body,{children:[Object(f.jsx)(b.a.Title,{children:n.client_name}),Object(f.jsxs)(b.a.Text,{children:[n.service_requested,n.service_notes,n.client_email]})]})}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{children:r.map((function(e,t){return Object(f.jsx)("li",{children:Object(f.jsx)("h4",{children:e.message})},t)}))}),Object(f.jsx)("div",{children:Object(f.jsx)(b.a,{children:Object(f.jsx)(b.a.Body,{children:Object(f.jsxs)(p.a,{onSubmit:function(e){return s.apply(this,arguments)},children:[Object(f.jsxs)(p.a.Group,{id:"message",children:[Object(f.jsx)(p.a.Label,{children:"Message"}),Object(f.jsx)(p.a.Control,{type:"text",ref:c,placeholder:"Type message",required:!0})]}),Object(f.jsx)(h.a,{type:"submit",children:"Send Message"})]})})})})]}):Object(f.jsx)(P.a,{animation:"border"})})};var $=function(e){e.serviceContent;var t=[{image:"Nike",url:""},{image:"Adidas",url:""},{image:"PLT",url:""},{image:"Mac Make up",url:""},{image:"Missguided",url:""},{image:"Boohoo.com",url:""},{image:"Ugg",url:""},{image:"Calvin Klein",url:""},{image:"Chanel Perfume",url:""},{image:"Prada Perfume",url:""}],r=Object(a.useState)(null),n=Object(o.a)(r,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){var e=Math.floor(11*Math.random());null!==c&&s(t[e])}),[]),null===c||void 0===c?Object(f.jsx)("h5",{children:" "}):(console.log("adchoice"+JSON.stringify(c)),Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("div",{className:"ad-box",children:["Ad box",c.image,c.url]})}))};r(65).io,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT;var ee,te,re=function(){return Object(f.jsxs)("div",{className:"Lost",children:[Object(f.jsx)("h1",{children:" The page you are looking for doesn't exist "}),Object(f.jsx)("br",{}),Object(f.jsx)("h2",{children:" Navigate to servviio.com to create a site for your service "})]})};r(65).io,r(80);O.a.apps.length?te=O.a.app().firestore():(O.a.initializeApp(m),te=O.a.firestore());Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT;var ne=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),r=t[0],n=t[1],c=Object(a.useState)(!0),s=Object(o.a)(c,2),i=(s[0],s[1]),l=Object(y.g)(),d=Object(a.useState)(!1),j=Object(o.a)(d,2),u=j[0],b=j[1],p=Object(a.useState)(!1),h=Object(o.a)(p,2),g=h[0];return h[1],Object(a.useEffect)((function(){!function(){var e=window.location.hostname;ee=(ee=e.replace(".myservviio.com","")).replace(".localhost",""),null===r&&te.collection("serviceProviders").doc(ee).get().then((function(e){e.exists?(n({site_name:e.id,service_content:e.data()}),i(!1)):b(!0)}))}()}),[]),!0===u?Object(f.jsx)(re,{}):null!==r&&void 0!==r&&r?Object(f.jsxs)(f.Fragment,{children:[!g&&Object(f.jsx)(U,{serviceContent:r}),"/"!==l.pathname&&!g&&Object(f.jsx)("div",{children:Object(f.jsx)($,{})}),Object(f.jsxs)(y.d,{children:[Object(f.jsxs)(y.b,{exact:!0,path:"/",children:[!r&&Object(f.jsx)(P.a,{}),r&&Object(f.jsx)(q,{serviceContent:r})]}),Object(f.jsx)(y.b,{exact:!0,path:"/services",children:Object(f.jsxs)("div",{children:[!r&&Object(f.jsx)(P.a,{}),Object(f.jsx)(N,{serviceContent:r})]})}),Object(f.jsxs)(y.b,{exact:!0,path:"/booking-request",children:[!r&&Object(f.jsx)(P.a,{}),Object(f.jsx)(_,{serviceContent:r})]}),Object(f.jsxs)(y.b,{exact:!0,path:"/booking-request/details",children:[!r&&Object(f.jsx)(P.a,{}),Object(f.jsx)(Z,{})]}),Object(f.jsxs)(y.b,{exact:!0,path:"/gallery",children:[!r&&Object(f.jsx)(P.a,{}),Object(f.jsx)(D,{serviceContent:r})]}),Object(f.jsxs)(y.b,{exact:!0,path:"/messages",children:[!r&&Object(f.jsx)(P.a,{}),r&&Object(f.jsx)(G,{serviceContent:r})]}),Object(f.jsxs)(y.b,{exact:!0,path:"/calendar",children:[!r&&Object(f.jsx)(P.a,{}),r&&Object(f.jsx)(M,{serviceContent:r})]}),Object(f.jsx)(y.b,{exact:!0,path:"/conversations",children:Object(f.jsx)(J,{})}),Object(f.jsx)(y.b,{children:Object(f.jsx)(F,{})})]})]}):Object(f.jsx)(P.a,{animation:"border"})},ae=(r(139),function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,150)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))});i.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(I.a,{children:Object(f.jsx)(ne,{})})}),document.getElementById("root")),ae()},53:function(e){e.exports=JSON.parse('{"a":{"theme-1":{"id":"T_001","name":"Pink_Red_Text","colors":{"body":"#FFFFFF","text":"#fc035a","background":"#FFFFFF"}},"theme-2":{"id":"T_002","name":"Pink_Red_Background","colors":{"body":"#fc035a","text":"#FFFFFF","background":"#fc035a"}},"theme-3":{"id":"T_003","name":"Light_Blue_Text","colors":{"body":"#FFFFFF","text":"#00aeff","background":"#FFFFFF"}},"theme-4":{"id":"T_004","name":"Light_Blue_Background","colors":{"body":"#00aeff","text":"#FFFFFF","background":"#00aeff"}},"theme-5":{"id":"T_005","name":"Navy_Text","colors":{"body":"#FFFFFF","text":"#02184a","background":"#FFFFFF"}},"theme-6":{"id":"T_006","name":"Navy_Background","colors":{"body":"#02184a","text":"#FFFFFF","background":"#02184a"}},"theme-7":{"id":"T_007","name":"Blue_Green_Text","colors":{"body":"#FFFFFF","text":"#00ffb7","background":"#FFFFFF"}},"theme-8":{"id":"T_008","name":"Blue_Green_Background","colors":{"body":"#00ffb7","text":"#FFFFFF","background":"#00ffb7"}},"theme-9":{"id":"T_009","name":"Purple_Pink_Text","colors":{"body":"#FFFFFF","text":"#a60aa6","background":"#FFFFFF"}},"theme-10":{"id":"T_010","name":"Purple_Pink_Background","colors":{"body":"#a60aa6","text":"#FFFFFF","background":"#a60aa6"}}}}')}},[[140,1,2]]]);
//# sourceMappingURL=main.f576dfd5.chunk.js.map